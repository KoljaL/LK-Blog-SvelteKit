(()=>{var ll=Object.create;var xi=Object.defineProperty;var al=Object.getOwnPropertyDescriptor;var cl=Object.getOwnPropertyNames;var ul=Object.getPrototypeOf,fl=Object.prototype.hasOwnProperty;var Ai=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var dl=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of cl(e))!fl.call(t,r)&&r!==n&&xi(t,r,{get:()=>e[r],enumerable:!(o=al(e,r))||o.enumerable});return t};var cr=(t,e,n)=>(n=t!=null?ll(ul(t)):{},dl(e||!t||!t.__esModule?xi(n,"default",{value:t,enumerable:!0}):n,t));var qi=Ai((Sr,ji)=>{(function(t,e){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],e);else if(typeof Sr<"u")e(ji);else{var n={exports:{}};e(n),t.browser=n.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Sr,function(t){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let e="The message port closed before a response was received.",n=o=>{let r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(r).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class i extends WeakMap{constructor(g,M=void 0){super(M),this.createItem=g}get(g){return this.has(g)||this.set(g,this.createItem(g)),super.get(g)}}let l=S=>S&&typeof S=="object"&&typeof S.then=="function",a=(S,g)=>(...M)=>{o.runtime.lastError?S.reject(new Error(o.runtime.lastError.message)):g.singleCallbackArg||M.length<=1&&g.singleCallbackArg!==!1?S.resolve(M[0]):S.resolve(M)},c=S=>S==1?"argument":"arguments",f=(S,g)=>function(v,...B){if(B.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${c(g.minArgs)} for ${S}(), got ${B.length}`);if(B.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${c(g.maxArgs)} for ${S}(), got ${B.length}`);return new Promise((W,ue)=>{if(g.fallbackToNoCallback)try{v[S](...B,a({resolve:W,reject:ue},g))}catch(H){console.warn(`${S} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,H),v[S](...B),g.fallbackToNoCallback=!1,g.noCallback=!0,W()}else g.noCallback?(v[S](...B),W()):v[S](...B,a({resolve:W,reject:ue},g))})},p=(S,g,M)=>new Proxy(g,{apply(v,B,W){return M.call(B,S,...W)}}),m=Function.call.bind(Object.prototype.hasOwnProperty),y=(S,g={},M={})=>{let v=Object.create(null),B={has(ue,H){return H in S||H in v},get(ue,H,le){if(H in v)return v[H];if(!(H in S))return;let Q=S[H];if(typeof Q=="function")if(typeof g[H]=="function")Q=p(S,S[H],g[H]);else if(m(M,H)){let K=f(H,M[H]);Q=p(S,S[H],K)}else Q=Q.bind(S);else if(typeof Q=="object"&&Q!==null&&(m(g,H)||m(M,H)))Q=y(Q,g[H],M[H]);else if(m(M,"*"))Q=y(Q,g[H],M["*"]);else return Object.defineProperty(v,H,{configurable:!0,enumerable:!0,get(){return S[H]},set(K){S[H]=K}}),Q;return v[H]=Q,Q},set(ue,H,le,Q){return H in v?v[H]=le:S[H]=le,!0},defineProperty(ue,H,le){return Reflect.defineProperty(v,H,le)},deleteProperty(ue,H){return Reflect.deleteProperty(v,H)}},W=Object.create(S);return new Proxy(W,B)},E=S=>({addListener(g,M,...v){g.addListener(S.get(M),...v)},hasListener(g,M){return g.hasListener(S.get(M))},removeListener(g,M){g.removeListener(S.get(M))}}),x=new i(S=>typeof S!="function"?S:function(M){let v=y(M,{},{getContent:{minArgs:0,maxArgs:0}});S(v)}),T=new i(S=>typeof S!="function"?S:function(M,v,B){let W=!1,ue,H=new Promise(U=>{ue=function(ne){W=!0,U(ne)}}),le;try{le=S(M,v,ue)}catch(U){le=Promise.reject(U)}let Q=le!==!0&&l(le);if(le!==!0&&!Q&&!W)return!1;let K=U=>{U.then(ne=>{B(ne)},ne=>{let Ae;ne&&(ne instanceof Error||typeof ne.message=="string")?Ae=ne.message:Ae="An unexpected error occurred",B({__mozWebExtensionPolyfillReject__:!0,message:Ae})}).catch(ne=>{console.error("Failed to send onMessage rejected reply",ne)})};return K(Q?le:H),!0}),C=({reject:S,resolve:g},M)=>{o.runtime.lastError?o.runtime.lastError.message===e?g():S(new Error(o.runtime.lastError.message)):M&&M.__mozWebExtensionPolyfillReject__?S(new Error(M.message)):g(M)},k=(S,g,M,...v)=>{if(v.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${c(g.minArgs)} for ${S}(), got ${v.length}`);if(v.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${c(g.maxArgs)} for ${S}(), got ${v.length}`);return new Promise((B,W)=>{let ue=C.bind(null,{resolve:B,reject:W});v.push(ue),M.sendMessage(...v)})},I={devtools:{network:{onRequestFinished:E(x)}},runtime:{onMessage:E(T),onMessageExternal:E(T),sendMessage:k.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:k.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},R={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":R},services:{"*":R},websites:{"*":R}},y(o,I,r)};t.exports=n(chrome)}else t.exports=globalThis.browser})});var Hr=Ai((jr,qr)=>{(function(t,e){typeof jr=="object"&&typeof qr<"u"?qr.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self).Sortable=e()})(jr,function(){"use strict";function t(s,u){var d,b=Object.keys(s);return Object.getOwnPropertySymbols&&(d=Object.getOwnPropertySymbols(s),u&&(d=d.filter(function(_){return Object.getOwnPropertyDescriptor(s,_).enumerable})),b.push.apply(b,d)),b}function e(s){for(var u=1;u<arguments.length;u++){var d=arguments[u]!=null?arguments[u]:{};u%2?t(Object(d),!0).forEach(function(b){var _,$;_=s,b=d[$=b],$ in _?Object.defineProperty(_,$,{value:b,enumerable:!0,configurable:!0,writable:!0}):_[$]=b}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(d)):t(Object(d)).forEach(function(b){Object.defineProperty(s,b,Object.getOwnPropertyDescriptor(d,b))})}return s}function n(s){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(s)}function o(){return(o=Object.assign||function(s){for(var u=1;u<arguments.length;u++){var d,b=arguments[u];for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(s[d]=b[d])}return s}).apply(this,arguments)}function r(s,u){if(s==null)return{};var d,b=function(O,N){if(O==null)return{};for(var j,Z={},re=Object.keys(O),ke=0;ke<re.length;ke++)j=re[ke],0<=N.indexOf(j)||(Z[j]=O[j]);return Z}(s,u);if(Object.getOwnPropertySymbols)for(var _=Object.getOwnPropertySymbols(s),$=0;$<_.length;$++)d=_[$],0<=u.indexOf(d)||Object.prototype.propertyIsEnumerable.call(s,d)&&(b[d]=s[d]);return b}function i(s){return function(u){if(Array.isArray(u))return l(u)}(s)||function(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}(s)||function(u,d){if(u){if(typeof u=="string")return l(u,d);var b=Object.prototype.toString.call(u).slice(8,-1);return(b=b==="Object"&&u.constructor?u.constructor.name:b)==="Map"||b==="Set"?Array.from(u):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?l(u,d):void 0}}(s)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function l(s,u){(u==null||u>s.length)&&(u=s.length);for(var d=0,b=new Array(u);d<u;d++)b[d]=s[d];return b}function a(s){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(s)}var c=a(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),f=a(/Edge/i),p=a(/firefox/i),m=a(/safari/i)&&!a(/chrome/i)&&!a(/android/i),y=a(/iP(ad|od|hone)/i),ro=a(/chrome/i)&&a(/android/i),E={capture:!1,passive:!1};function x(s,u,d){s.addEventListener(u,d,!c&&E)}function T(s,u,d){s.removeEventListener(u,d,!c&&E)}function C(s,u){if(u&&(u[0]===">"&&(u=u.substring(1)),s))try{if(s.matches)return s.matches(u);if(s.msMatchesSelector)return s.msMatchesSelector(u);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(u)}catch{return}}function k(s,u,d,b){if(s){d=d||document;do if(u!=null&&(u[0]!==">"||s.parentNode===d)&&C(s,u)||b&&s===d)return s;while(s!==d&&(s=(_=s).host&&_!==document&&_.host.nodeType?_.host:_.parentNode))}var _;return null}var I,R=/\s+/g;function S(s,u,d){var b;s&&u&&(s.classList?s.classList[d?"add":"remove"](u):(b=(" "+s.className+" ").replace(R," ").replace(" "+u+" "," "),s.className=(b+(d?" "+u:"")).replace(R," ")))}function g(s,u,d){var b=s&&s.style;if(b){if(d===void 0)return document.defaultView&&document.defaultView.getComputedStyle?d=document.defaultView.getComputedStyle(s,""):s.currentStyle&&(d=s.currentStyle),u===void 0?d:d[u];b[u=u in b||u.indexOf("webkit")!==-1?u:"-webkit-"+u]=d+(typeof d=="string"?"":"px")}}function M(s,u){var d="";if(typeof s=="string")d=s;else do var b=g(s,"transform");while(b&&b!=="none"&&(d=b+" "+d),!u&&(s=s.parentNode));var _=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return _&&new _(d)}function v(s,u,d){if(s){var b=s.getElementsByTagName(u),_=0,$=b.length;if(d)for(;_<$;_++)d(b[_],_);return b}return[]}function B(){var s=document.scrollingElement;return s||document.documentElement}function W(s,u,d,b,_){if(s.getBoundingClientRect||s===window){var $,O,N,j,Z,re,ke=s!==window&&s.parentNode&&s!==B()?(O=($=s.getBoundingClientRect()).top,N=$.left,j=$.bottom,Z=$.right,re=$.height,$.width):(N=O=0,j=window.innerHeight,Z=window.innerWidth,re=window.innerHeight,window.innerWidth);if((u||d)&&s!==window&&(_=_||s.parentNode,!c))do if(_&&_.getBoundingClientRect&&(g(_,"transform")!=="none"||d&&g(_,"position")!=="static")){var Fe=_.getBoundingClientRect();O-=Fe.top+parseInt(g(_,"border-top-width")),N-=Fe.left+parseInt(g(_,"border-left-width")),j=O+$.height,Z=N+$.width;break}while(_=_.parentNode);return b&&s!==window&&(b=(u=M(_||s))&&u.a,s=u&&u.d,u&&(j=(O/=s)+(re/=s),Z=(N/=b)+(ke/=b))),{top:O,left:N,bottom:j,right:Z,width:ke,height:re}}}function ue(s,u,d){for(var b=U(s,!0),_=W(s)[u];b;){var $=W(b)[d];if(!(d==="top"||d==="left"?$<=_:_<=$))return b;if(b===B())break;b=U(b,!1)}return!1}function H(s,u,d,b){for(var _=0,$=0,O=s.children;$<O.length;){if(O[$].style.display!=="none"&&O[$]!==P.ghost&&(b||O[$]!==P.dragged)&&k(O[$],d.draggable,s,!1)){if(_===u)return O[$];_++}$++}return null}function le(s,u){for(var d=s.lastElementChild;d&&(d===P.ghost||g(d,"display")==="none"||u&&!C(d,u));)d=d.previousElementSibling;return d||null}function Q(s,u){var d=0;if(!s||!s.parentNode)return-1;for(;s=s.previousElementSibling;)s.nodeName.toUpperCase()==="TEMPLATE"||s===P.clone||u&&!C(s,u)||d++;return d}function K(s){var u=0,d=0,b=B();if(s)do var $=M(s),_=$.a,$=$.d;while(u+=s.scrollLeft*_,d+=s.scrollTop*$,s!==b&&(s=s.parentNode));return[u,d]}function U(s,u){if(!s||!s.getBoundingClientRect)return B();var d=s,b=!1;do if(d.clientWidth<d.scrollWidth||d.clientHeight<d.scrollHeight){var _=g(d);if(d.clientWidth<d.scrollWidth&&(_.overflowX=="auto"||_.overflowX=="scroll")||d.clientHeight<d.scrollHeight&&(_.overflowY=="auto"||_.overflowY=="scroll")){if(!d.getBoundingClientRect||d===document.body)return B();if(b||u)return d;b=!0}}while(d=d.parentNode);return B()}function ne(s,u){return Math.round(s.top)===Math.round(u.top)&&Math.round(s.left)===Math.round(u.left)&&Math.round(s.height)===Math.round(u.height)&&Math.round(s.width)===Math.round(u.width)}function Ae(s,u){return function(){var d;I||((d=arguments).length===1?s.call(this,d[0]):s.apply(this,d),I=setTimeout(function(){I=void 0},u))}}function lt(s,u,d){s.scrollLeft+=u,s.scrollTop+=d}function it(s){var u=window.Polymer,d=window.jQuery||window.Zepto;return u&&u.dom?u.dom(s).cloneNode(!0):d?d(s).clone(!0)[0]:s.cloneNode(!0)}function dt(s,u){g(s,"position","absolute"),g(s,"top",u.top),g(s,"left",u.left),g(s,"width",u.width),g(s,"height",u.height)}function Qe(s){g(s,"position",""),g(s,"top",""),g(s,"left",""),g(s,"width",""),g(s,"height","")}var Be="Sortable"+new Date().getTime();function Te(){var s,u=[];return{captureAnimationState:function(){u=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(d){var b,_;g(d,"display")!=="none"&&d!==P.ghost&&(u.push({target:d,rect:W(d)}),b=e({},u[u.length-1].rect),!d.thisAnimationDuration||(_=M(d,!0))&&(b.top-=_.f,b.left-=_.e),d.fromRect=b)})},addAnimationState:function(d){u.push(d)},removeAnimationState:function(d){u.splice(function(b,_){for(var $ in b)if(b.hasOwnProperty($)){for(var O in _)if(_.hasOwnProperty(O)&&_[O]===b[$][O])return Number($)}return-1}(u,{target:d}),1)},animateAll:function(d){var b=this;if(!this.options.animation)return clearTimeout(s),void(typeof d=="function"&&d());var _=!1,$=0;u.forEach(function(O){var N=0,j=O.target,Z=j.fromRect,re=W(j),ke=j.prevFromRect,Fe=j.prevToRect,ve=O.rect,je=M(j,!0);je&&(re.top-=je.f,re.left-=je.e),j.toRect=re,j.thisAnimationDuration&&ne(ke,re)&&!ne(Z,re)&&(ve.top-re.top)/(ve.left-re.left)==(Z.top-re.top)/(Z.left-re.left)&&(O=ve,je=ke,ke=Fe,Fe=b.options,N=Math.sqrt(Math.pow(je.top-O.top,2)+Math.pow(je.left-O.left,2))/Math.sqrt(Math.pow(je.top-ke.top,2)+Math.pow(je.left-ke.left,2))*Fe.animation),ne(re,Z)||(j.prevFromRect=Z,j.prevToRect=re,N=N||b.options.animation,b.animate(j,ve,re,N)),N&&(_=!0,$=Math.max($,N),clearTimeout(j.animationResetTimer),j.animationResetTimer=setTimeout(function(){j.animationTime=0,j.prevFromRect=null,j.fromRect=null,j.prevToRect=null,j.thisAnimationDuration=null},N),j.thisAnimationDuration=N)}),clearTimeout(s),_?s=setTimeout(function(){typeof d=="function"&&d()},$):typeof d=="function"&&d(),u=[]},animate:function(d,b,_,$){var O,N;$&&(g(d,"transition",""),g(d,"transform",""),O=(N=M(this.el))&&N.a,N=N&&N.d,O=(b.left-_.left)/(O||1),N=(b.top-_.top)/(N||1),d.animatingX=!!O,d.animatingY=!!N,g(d,"transform","translate3d("+O+"px,"+N+"px,0)"),this.forRepaintDummy=d.offsetWidth,g(d,"transition","transform "+$+"ms"+(this.options.easing?" "+this.options.easing:"")),g(d,"transform","translate3d(0,0,0)"),typeof d.animated=="number"&&clearTimeout(d.animated),d.animated=setTimeout(function(){g(d,"transition",""),g(d,"transform",""),d.animated=!1,d.animatingX=!1,d.animatingY=!1},$))}}}var Y=[],J={initializeByDefault:!0},ge={mount:function(s){for(var u in J)!J.hasOwnProperty(u)||u in s||(s[u]=J[u]);Y.forEach(function(d){if(d.pluginName===s.pluginName)throw"Sortable: Cannot mount plugin ".concat(s.pluginName," more than once")}),Y.push(s)},pluginEvent:function(s,u,d){var b=this;this.eventCanceled=!1,d.cancel=function(){b.eventCanceled=!0};var _=s+"Global";Y.forEach(function($){u[$.pluginName]&&(u[$.pluginName][_]&&u[$.pluginName][_](e({sortable:u},d)),u.options[$.pluginName]&&u[$.pluginName][s]&&u[$.pluginName][s](e({sortable:u},d)))})},initializePlugins:function(s,u,d,b){for(var _ in Y.forEach(function(O){var N=O.pluginName;(s.options[N]||O.initializeByDefault)&&((O=new O(s,u,s.options)).sortable=s,O.options=s.options,s[N]=O,o(d,O.defaults))}),s.options){var $;s.options.hasOwnProperty(_)&&($=this.modifyOption(s,_,s.options[_]))!==void 0&&(s.options[_]=$)}},getEventProperties:function(s,u){var d={};return Y.forEach(function(b){typeof b.eventProperties=="function"&&o(d,b.eventProperties.call(u[b.pluginName],s))}),d},modifyOption:function(s,u,d){var b;return Y.forEach(function(_){s[_.pluginName]&&_.optionListeners&&typeof _.optionListeners[u]=="function"&&(b=_.optionListeners[u].call(s[_.pluginName],d))}),b}};function We(s){var u=s.sortable,d=s.rootEl,b=s.name,_=s.targetEl,$=s.cloneEl,O=s.toEl,N=s.fromEl,j=s.oldIndex,Z=s.newIndex,re=s.oldDraggableIndex,ke=s.newDraggableIndex,Fe=s.originalEvent,ve=s.putSortable,je=s.extraEventProperties;if(u=u||d&&d[Be]){var we,Ge=u.options,s="on"+b.charAt(0).toUpperCase()+b.substr(1);!window.CustomEvent||c||f?(we=document.createEvent("Event")).initEvent(b,!0,!0):we=new CustomEvent(b,{bubbles:!0,cancelable:!0}),we.to=O||d,we.from=N||d,we.item=_||d,we.clone=$,we.oldIndex=j,we.newIndex=Z,we.oldDraggableIndex=re,we.newDraggableIndex=ke,we.originalEvent=Fe,we.pullMode=ve?ve.lastPutMode:void 0;var bt,De=e(e({},je),ge.getEventProperties(b,u));for(bt in De)we[bt]=De[bt];d&&d.dispatchEvent(we),Ge[s]&&Ge[s].call(u,we)}}function Le(s,u){var d=(b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{}).evt,b=r(b,Dn);ge.pluginEvent.bind(P)(s,u,e({dragEl:X,parentEl:Se,ghostEl:he,rootEl:Ce,nextEl:xt,lastDownEl:_n,cloneEl:Ie,cloneHidden:Tt,dragStarted:rn,putSortable:Je,activeSortable:P.active,originalEvent:d,oldIndex:et,oldDraggableIndex:at,newIndex:tt,newDraggableIndex:mt,hideGhostForTarget:Ao,unhideGhostForTarget:to,cloneNowHidden:function(){Tt=!0},cloneNowShown:function(){Tt=!1},dispatchSortableEvent:function(_){Oe({sortable:u,name:_,originalEvent:d})}},b))}var Dn=["evt"];function Oe(s){We(e({putSortable:Je,cloneEl:Ie,targetEl:X,rootEl:Ce,oldIndex:et,oldDraggableIndex:at,newIndex:tt,newDraggableIndex:mt},s))}var X,Se,he,Ce,xt,_n,Ie,Tt,et,tt,at,mt,bn,Je,It,Ye,vn,yn,At,kn,rn,Nt,sn,ht,Ve,Lt=!1,Gt=!1,ln=[],Pt=!1,an=!1,cn=[],wn=!1,Bt=[],Et=typeof document<"u",Ut=y,Mn=f||c?"cssFloat":"float",xo=Et&&!ro&&!y&&"draggable"in document.createElement("div"),eo=function(){if(Et){if(c)return!1;var s=document.createElement("x");return s.style.cssText="pointer-events:auto",s.style.pointerEvents==="auto"}}(),xn=function(Z,u){var d=g(Z),b=parseInt(d.width)-parseInt(d.paddingLeft)-parseInt(d.paddingRight)-parseInt(d.borderLeftWidth)-parseInt(d.borderRightWidth),_=H(Z,0,u),$=H(Z,1,u),O=_&&g(_),N=$&&g($),j=O&&parseInt(O.marginLeft)+parseInt(O.marginRight)+W(_).width,Z=N&&parseInt(N.marginLeft)+parseInt(N.marginRight)+W($).width;return d.display==="flex"?d.flexDirection==="column"||d.flexDirection==="column-reverse"?"vertical":"horizontal":d.display==="grid"?d.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":_&&O.float&&O.float!=="none"?(u=O.float==="left"?"left":"right",!$||N.clear!=="both"&&N.clear!==u?"horizontal":"vertical"):_&&(O.display==="block"||O.display==="flex"||O.display==="table"||O.display==="grid"||b<=j&&d[Mn]==="none"||$&&d[Mn]==="none"&&b<j+Z)?"vertical":"horizontal"},gt=function(s){function u(_,$){return function(O,N,j,Z){var re=O.options.group.name&&N.options.group.name&&O.options.group.name===N.options.group.name;return _==null&&($||re)?!0:_==null||_===!1?!1:$&&_==="clone"?_:typeof _=="function"?u(_(O,N,j,Z),$)(O,N,j,Z):(N=($?O:N).options.group.name,_===!0||typeof _=="string"&&_===N||_.join&&-1<_.indexOf(N))}}var d={},b=s.group;b&&n(b)=="object"||(b={name:b}),d.name=b.name,d.checkPull=u(b.pull,!0),d.checkPut=u(b.put),d.revertClone=b.revertClone,s.group=d},Ao=function(){!eo&&he&&g(he,"display","none")},to=function(){!eo&&he&&g(he,"display","")};Et&&!ro&&document.addEventListener("click",function(s){if(Gt)return s.preventDefault(),s.stopPropagation&&s.stopPropagation(),s.stopImmediatePropagation&&s.stopImmediatePropagation(),Gt=!1},!0);function zt(s){if(X){s=s.touches?s.touches[0]:s;var u=(_=s.clientX,$=s.clientY,ln.some(function(N){var j=N[Be].options.emptyInsertThreshold;if(j&&!le(N)){var Z=W(N),re=_>=Z.left-j&&_<=Z.right+j,j=$>=Z.top-j&&$<=Z.bottom+j;return re&&j?O=N:void 0}}),O);if(u){var d,b={};for(d in s)s.hasOwnProperty(d)&&(b[d]=s[d]);b.target=b.rootEl=u,b.preventDefault=void 0,b.stopPropagation=void 0,u[Be]._onDragOver(b)}}var _,$,O}function Eo(s){X&&X.parentNode[Be]._isOutsideThisEl(s.target)}function P(s,u){if(!s||!s.nodeType||s.nodeType!==1)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(s));this.el=s,this.options=u=o({},u),s[Be]=this;var d,b,_={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(s.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return xn(s,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function($,O){$.setData("Text",O.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:P.supportPointer!==!1&&"PointerEvent"in window&&!m,emptyInsertThreshold:5};for(d in ge.initializePlugins(this,s,_),_)d in u||(u[d]=_[d]);for(b in gt(u),this)b.charAt(0)==="_"&&typeof this[b]=="function"&&(this[b]=this[b].bind(this));this.nativeDraggable=!u.forceFallback&&xo,this.nativeDraggable&&(this.options.touchStartThreshold=1),u.supportPointer?x(s,"pointerdown",this._onTapStart):(x(s,"mousedown",this._onTapStart),x(s,"touchstart",this._onTapStart)),this.nativeDraggable&&(x(s,"dragover",this),x(s,"dragenter",this)),ln.push(this.el),u.store&&u.store.get&&this.sort(u.store.get(this)||[]),o(this,Te())}function oe(s,u,d,b,_,$,O,N){var j,Z,re=s[Be],ke=re.options.onMove;return!window.CustomEvent||c||f?(j=document.createEvent("Event")).initEvent("move",!0,!0):j=new CustomEvent("move",{bubbles:!0,cancelable:!0}),j.to=u,j.from=s,j.dragged=d,j.draggedRect=b,j.related=_||u,j.relatedRect=$||W(u),j.willInsertAfter=N,j.originalEvent=O,s.dispatchEvent(j),Z=ke?ke.call(re,j,O):Z}function On(s){s.draggable=!1}function Co(){wn=!1}function So(s){return setTimeout(s,0)}function Qo(s){return clearTimeout(s)}P.prototype={constructor:P,_isOutsideThisEl:function(s){this.el.contains(s)||s===this.el||(Nt=null)},_getDirection:function(s,u){return typeof this.options.direction=="function"?this.options.direction.call(this,s,u,X):this.options.direction},_onTapStart:function(s){if(s.cancelable){var u=this,d=this.el,b=this.options,_=b.preventOnFilter,$=s.type,O=s.touches&&s.touches[0]||s.pointerType&&s.pointerType==="touch"&&s,N=(O||s).target,j=s.target.shadowRoot&&(s.path&&s.path[0]||s.composedPath&&s.composedPath()[0])||N,Z=b.filter;if(function(re){Bt.length=0;for(var ke=re.getElementsByTagName("input"),Fe=ke.length;Fe--;){var ve=ke[Fe];ve.checked&&Bt.push(ve)}}(d),!X&&!(/mousedown|pointerdown/.test($)&&s.button!==0||b.disabled)&&!j.isContentEditable&&(this.nativeDraggable||!m||!N||N.tagName.toUpperCase()!=="SELECT")&&!((N=k(N,b.draggable,d,!1))&&N.animated||_n===N)){if(et=Q(N),at=Q(N,b.draggable),typeof Z=="function"){if(Z.call(this,s,N,this))return Oe({sortable:u,rootEl:j,name:"filter",targetEl:N,toEl:d,fromEl:d}),Le("filter",u,{evt:s}),void(_&&s.cancelable&&s.preventDefault())}else if(Z=Z&&Z.split(",").some(function(re){if(re=k(j,re.trim(),d,!1))return Oe({sortable:u,rootEl:re,name:"filter",targetEl:N,fromEl:d,toEl:d}),Le("filter",u,{evt:s}),!0}))return void(_&&s.cancelable&&s.preventDefault());b.handle&&!k(j,b.handle,d,!1)||this._prepareDragStart(s,O,N)}}},_prepareDragStart:function(s,u,d){var b,_=this,$=_.el,O=_.options,N=$.ownerDocument;d&&!X&&d.parentNode===$&&(b=W(d),Ce=$,Se=(X=d).parentNode,xt=X.nextSibling,_n=d,bn=O.group,It={target:P.dragged=X,clientX:(u||s).clientX,clientY:(u||s).clientY},At=It.clientX-b.left,kn=It.clientY-b.top,this._lastX=(u||s).clientX,this._lastY=(u||s).clientY,X.style["will-change"]="all",b=function(){Le("delayEnded",_,{evt:s}),P.eventCanceled?_._onDrop():(_._disableDelayedDragEvents(),!p&&_.nativeDraggable&&(X.draggable=!0),_._triggerDragStart(s,u),Oe({sortable:_,name:"choose",originalEvent:s}),S(X,O.chosenClass,!0))},O.ignore.split(",").forEach(function(j){v(X,j.trim(),On)}),x(N,"dragover",zt),x(N,"mousemove",zt),x(N,"touchmove",zt),x(N,"mouseup",_._onDrop),x(N,"touchend",_._onDrop),x(N,"touchcancel",_._onDrop),p&&this.nativeDraggable&&(this.options.touchStartThreshold=4,X.draggable=!0),Le("delayStart",this,{evt:s}),!O.delay||O.delayOnTouchOnly&&!u||this.nativeDraggable&&(f||c)?b():P.eventCanceled?this._onDrop():(x(N,"mouseup",_._disableDelayedDrag),x(N,"touchend",_._disableDelayedDrag),x(N,"touchcancel",_._disableDelayedDrag),x(N,"mousemove",_._delayedDragTouchMoveHandler),x(N,"touchmove",_._delayedDragTouchMoveHandler),O.supportPointer&&x(N,"pointermove",_._delayedDragTouchMoveHandler),_._dragStartTimer=setTimeout(b,O.delay)))},_delayedDragTouchMoveHandler:function(s){s=s.touches?s.touches[0]:s,Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){X&&On(X),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var s=this.el.ownerDocument;T(s,"mouseup",this._disableDelayedDrag),T(s,"touchend",this._disableDelayedDrag),T(s,"touchcancel",this._disableDelayedDrag),T(s,"mousemove",this._delayedDragTouchMoveHandler),T(s,"touchmove",this._delayedDragTouchMoveHandler),T(s,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(s,u){u=u||s.pointerType=="touch"&&s,!this.nativeDraggable||u?this.options.supportPointer?x(document,"pointermove",this._onTouchMove):x(document,u?"touchmove":"mousemove",this._onTouchMove):(x(X,"dragend",this),x(Ce,"dragstart",this._onDragStart));try{document.selection?So(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(s,u){var d;Lt=!1,Ce&&X?(Le("dragStarted",this,{evt:u}),this.nativeDraggable&&x(document,"dragover",Eo),d=this.options,s||S(X,d.dragClass,!1),S(X,d.ghostClass,!0),P.active=this,s&&this._appendGhost(),Oe({sortable:this,name:"start",originalEvent:u})):this._nulling()},_emulateDragOver:function(){if(Ye){this._lastX=Ye.clientX,this._lastY=Ye.clientY,Ao();for(var s=document.elementFromPoint(Ye.clientX,Ye.clientY),u=s;s&&s.shadowRoot&&(s=s.shadowRoot.elementFromPoint(Ye.clientX,Ye.clientY))!==u;)u=s;if(X.parentNode[Be]._isOutsideThisEl(s),u)do if(u[Be]&&u[Be]._onDragOver({clientX:Ye.clientX,clientY:Ye.clientY,target:s,rootEl:u})&&!this.options.dragoverBubble)break;while(u=(s=u).parentNode);to()}},_onTouchMove:function(s){if(It){var $=this.options,u=$.fallbackTolerance,d=$.fallbackOffset,b=s.touches?s.touches[0]:s,_=he&&M(he,!0),O=he&&_&&_.a,N=he&&_&&_.d,$=Ut&&Ve&&K(Ve),O=(b.clientX-It.clientX+d.x)/(O||1)+($?$[0]-cn[0]:0)/(O||1),N=(b.clientY-It.clientY+d.y)/(N||1)+($?$[1]-cn[1]:0)/(N||1);if(!P.active&&!Lt){if(u&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<u)return;this._onDragStart(s,!0)}he&&(_?(_.e+=O-(vn||0),_.f+=N-(yn||0)):_={a:1,b:0,c:0,d:1,e:O,f:N},_="matrix(".concat(_.a,",").concat(_.b,",").concat(_.c,",").concat(_.d,",").concat(_.e,",").concat(_.f,")"),g(he,"webkitTransform",_),g(he,"mozTransform",_),g(he,"msTransform",_),g(he,"transform",_),vn=O,yn=N,Ye=b),s.cancelable&&s.preventDefault()}},_appendGhost:function(){if(!he){var s=this.options.fallbackOnBody?document.body:Ce,u=W(X,!0,Ut,!0,s),d=this.options;if(Ut){for(Ve=s;g(Ve,"position")==="static"&&g(Ve,"transform")==="none"&&Ve!==document;)Ve=Ve.parentNode;Ve!==document.body&&Ve!==document.documentElement?(Ve===document&&(Ve=B()),u.top+=Ve.scrollTop,u.left+=Ve.scrollLeft):Ve=B(),cn=K(Ve)}S(he=X.cloneNode(!0),d.ghostClass,!1),S(he,d.fallbackClass,!0),S(he,d.dragClass,!0),g(he,"transition",""),g(he,"transform",""),g(he,"box-sizing","border-box"),g(he,"margin",0),g(he,"top",u.top),g(he,"left",u.left),g(he,"width",u.width),g(he,"height",u.height),g(he,"opacity","0.8"),g(he,"position",Ut?"absolute":"fixed"),g(he,"zIndex","100000"),g(he,"pointerEvents","none"),P.ghost=he,s.appendChild(he),g(he,"transform-origin",At/parseInt(he.style.width)*100+"% "+kn/parseInt(he.style.height)*100+"%")}},_onDragStart:function(s,u){var d=this,b=s.dataTransfer,_=d.options;Le("dragStart",this,{evt:s}),P.eventCanceled?this._onDrop():(Le("setupClone",this),P.eventCanceled||((Ie=it(X)).removeAttribute("id"),Ie.draggable=!1,Ie.style["will-change"]="",this._hideClone(),S(Ie,this.options.chosenClass,!1),P.clone=Ie),d.cloneId=So(function(){Le("clone",d),P.eventCanceled||(d.options.removeCloneOnHide||Ce.insertBefore(Ie,X),d._hideClone(),Oe({sortable:d,name:"clone"}))}),u||S(X,_.dragClass,!0),u?(Gt=!0,d._loopId=setInterval(d._emulateDragOver,50)):(T(document,"mouseup",d._onDrop),T(document,"touchend",d._onDrop),T(document,"touchcancel",d._onDrop),b&&(b.effectAllowed="move",_.setData&&_.setData.call(d,b,X)),x(document,"drop",d),g(X,"transform","translateZ(0)")),Lt=!0,d._dragStartId=So(d._dragStarted.bind(d,u,s)),x(document,"selectstart",d),rn=!0,m&&g(document.body,"user-select","none"))},_onDragOver:function(s){var u,d,b,_,$=this.el,O=s.target,N=this.options,j=N.group,Z=P.active,re=bn===j,ke=N.sort,Fe=Je||Z,ve=this,je=!1;if(!wn){if(s.preventDefault!==void 0&&s.cancelable&&s.preventDefault(),O=k(O,N.draggable,$,!0),Ze("dragOver"),P.eventCanceled)return je;if(X.contains(s.target)||O.animated&&O.animatingX&&O.animatingY||ve._ignoreWhileAnimating===O)return yt(!1);if(Gt=!1,Z&&!N.disabled&&(re?ke||(d=Se!==Ce):Je===this||(this.lastPutMode=bn.checkPull(this,Z,X,s))&&j.checkPut(this,Z,X,s))){if(b=this._getDirection(s,O)==="vertical",u=W(X),Ze("dragOverValid"),P.eventCanceled)return je;if(d)return Se=Ce,Vt(),this._hideClone(),Ze("revert"),P.eventCanceled||(xt?Ce.insertBefore(X,xt):Ce.appendChild(X)),yt(!0);var we=le($,N.draggable);if(!we||function(Xe,co,Re){return Re=W(le(Re.el,Re.options.draggable)),co?Xe.clientX>Re.right+10||Xe.clientX<=Re.right&&Xe.clientY>Re.bottom&&Xe.clientX>=Re.left:Xe.clientX>Re.right&&Xe.clientY>Re.top||Xe.clientX<=Re.right&&Xe.clientY>Re.bottom+10}(s,b,this)&&!we.animated){if(we===X)return yt(!1);if((O=we&&$===s.target?we:O)&&(vt=W(O)),oe(Ce,$,X,u,O,vt,s,!!O)!==!1)return Vt(),we&&we.nextSibling?$.insertBefore(X,we.nextSibling):$.appendChild(X),Se=$,An(),yt(!0)}else if(we&&function(Xe,co,Re){return Re=W(H(Re.el,0,Re.options,!0)),co?Xe.clientX<Re.left-10||Xe.clientY<Re.top&&Xe.clientX<Re.right:Xe.clientY<Re.top-10||Xe.clientY<Re.bottom&&Xe.clientX<Re.left}(s,b,this)){var Ge=H($,0,N,!0);if(Ge===X)return yt(!1);if(vt=W(O=Ge),oe(Ce,$,X,u,O,vt,s,!1)!==!1)return Vt(),$.insertBefore(X,Ge),Se=$,An(),yt(!0)}else if(O.parentNode===$){var bt,De,Ct,vt=W(O),Yt=X.parentNode!==$,qe=(qe=X.animated&&X.toRect||u,Ue=O.animated&&O.toRect||vt,Xt=(_=b)?qe.left:qe.top,j=_?qe.right:qe.bottom,we=_?qe.width:qe.height,Ge=_?Ue.left:Ue.top,qe=_?Ue.right:Ue.bottom,Ue=_?Ue.width:Ue.height,!(Xt===Ge||j===qe||Xt+we/2===Ge+Ue/2)),Xt=b?"top":"left",we=ue(O,"top","top")||ue(X,"top","top"),Ge=we?we.scrollTop:void 0;if(Nt!==O&&(De=vt[Xt],Pt=!1,an=!qe&&N.invertSwap||Yt),(bt=function(fn,lr,Rt,Zt,ar,Mo,wi,il){var Kt=Zt?fn.clientY:fn.clientX,un=Zt?Rt.height:Rt.width,fn=Zt?Rt.top:Rt.left,Zt=Zt?Rt.bottom:Rt.right,Rt=!1;if(!wi){if(il&&ht<un*ar){if(Pt=!Pt&&(sn===1?fn+un*Mo/2<Kt:Kt<Zt-un*Mo/2)?!0:Pt)Rt=!0;else if(sn===1?Kt<fn+ht:Zt-ht<Kt)return-sn}else if(fn+un*(1-ar)/2<Kt&&Kt<Zt-un*(1-ar)/2)return function(sl){return Q(X)<Q(sl)?1:-1}(lr)}return(Rt=Rt||wi)&&(Kt<fn+un*Mo/2||Zt-un*Mo/2<Kt)?fn+un/2<Kt?1:-1:0}(s,O,vt,b,qe?1:N.swapThreshold,N.invertedSwapThreshold==null?N.swapThreshold:N.invertedSwapThreshold,an,Nt===O))!==0)for(var ao=Q(X);(Ct=Se.children[ao-=bt])&&(g(Ct,"display")==="none"||Ct===he););if(bt===0||Ct===O)return yt(!1);sn=bt;var Ue=(Nt=O).nextElementSibling,Yt=!1,qe=oe(Ce,$,X,u,O,vt,s,Yt=bt===1);if(qe!==!1)return qe!==1&&qe!==-1||(Yt=qe===1),wn=!0,setTimeout(Co,30),Vt(),Yt&&!Ue?$.appendChild(X):O.parentNode.insertBefore(X,Yt?Ue:O),we&&lt(we,0,Ge-we.scrollTop),Se=X.parentNode,De===void 0||an||(ht=Math.abs(De-W(O)[Xt])),An(),yt(!0)}if($.contains(X))return yt(!1)}return!1}function Ze(Xe,co){Le(Xe,ve,e({evt:s,isOwner:re,axis:b?"vertical":"horizontal",revert:d,dragRect:u,targetRect:vt,canSort:ke,fromSortable:Fe,target:O,completed:yt,onMove:function(Re,lr){return oe(Ce,$,X,u,Re,W(Re),s,lr)},changed:An},co))}function Vt(){Ze("dragOverAnimationCapture"),ve.captureAnimationState(),ve!==Fe&&Fe.captureAnimationState()}function yt(Xe){return Ze("dragOverCompleted",{insertion:Xe}),Xe&&(re?Z._hideClone():Z._showClone(ve),ve!==Fe&&(S(X,(Je||Z).options.ghostClass,!1),S(X,N.ghostClass,!0)),Je!==ve&&ve!==P.active?Je=ve:ve===P.active&&Je&&(Je=null),Fe===ve&&(ve._ignoreWhileAnimating=O),ve.animateAll(function(){Ze("dragOverAnimationComplete"),ve._ignoreWhileAnimating=null}),ve!==Fe&&(Fe.animateAll(),Fe._ignoreWhileAnimating=null)),(O===X&&!X.animated||O===$&&!O.animated)&&(Nt=null),N.dragoverBubble||s.rootEl||O===document||(X.parentNode[Be]._isOutsideThisEl(s.target),Xe||zt(s)),!N.dragoverBubble&&s.stopPropagation&&s.stopPropagation(),je=!0}function An(){tt=Q(X),mt=Q(X,N.draggable),Oe({sortable:ve,name:"change",toEl:$,newIndex:tt,newDraggableIndex:mt,originalEvent:s})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){T(document,"mousemove",this._onTouchMove),T(document,"touchmove",this._onTouchMove),T(document,"pointermove",this._onTouchMove),T(document,"dragover",zt),T(document,"mousemove",zt),T(document,"touchmove",zt)},_offUpEvents:function(){var s=this.el.ownerDocument;T(s,"mouseup",this._onDrop),T(s,"touchend",this._onDrop),T(s,"pointerup",this._onDrop),T(s,"touchcancel",this._onDrop),T(document,"selectstart",this)},_onDrop:function(s){var u=this.el,d=this.options;tt=Q(X),mt=Q(X,d.draggable),Le("drop",this,{evt:s}),Se=X&&X.parentNode,tt=Q(X),mt=Q(X,d.draggable),P.eventCanceled||(Pt=an=Lt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Qo(this.cloneId),Qo(this._dragStartId),this.nativeDraggable&&(T(document,"drop",this),T(u,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),m&&g(document.body,"user-select",""),g(X,"transform",""),s&&(rn&&(s.cancelable&&s.preventDefault(),d.dropBubble||s.stopPropagation()),he&&he.parentNode&&he.parentNode.removeChild(he),(Ce===Se||Je&&Je.lastPutMode!=="clone")&&Ie&&Ie.parentNode&&Ie.parentNode.removeChild(Ie),X&&(this.nativeDraggable&&T(X,"dragend",this),On(X),X.style["will-change"]="",rn&&!Lt&&S(X,(Je||this).options.ghostClass,!1),S(X,this.options.chosenClass,!1),Oe({sortable:this,name:"unchoose",toEl:Se,newIndex:null,newDraggableIndex:null,originalEvent:s}),Ce!==Se?(0<=tt&&(Oe({rootEl:Se,name:"add",toEl:Se,fromEl:Ce,originalEvent:s}),Oe({sortable:this,name:"remove",toEl:Se,originalEvent:s}),Oe({rootEl:Se,name:"sort",toEl:Se,fromEl:Ce,originalEvent:s}),Oe({sortable:this,name:"sort",toEl:Se,originalEvent:s})),Je&&Je.save()):tt!==et&&0<=tt&&(Oe({sortable:this,name:"update",toEl:Se,originalEvent:s}),Oe({sortable:this,name:"sort",toEl:Se,originalEvent:s})),P.active&&(tt!=null&&tt!==-1||(tt=et,mt=at),Oe({sortable:this,name:"end",toEl:Se,originalEvent:s}),this.save())))),this._nulling()},_nulling:function(){Le("nulling",this),Ce=X=Se=he=xt=Ie=_n=Tt=It=Ye=rn=tt=mt=et=at=Nt=sn=Je=bn=P.dragged=P.ghost=P.clone=P.active=null,Bt.forEach(function(s){s.checked=!0}),Bt.length=vn=yn=0},handleEvent:function(s){switch(s.type){case"drop":case"dragend":this._onDrop(s);break;case"dragenter":case"dragover":X&&(this._onDragOver(s),function(u){u.dataTransfer&&(u.dataTransfer.dropEffect="move"),u.cancelable&&u.preventDefault()}(s));break;case"selectstart":s.preventDefault()}},toArray:function(){for(var s,u=[],d=this.el.children,b=0,_=d.length,$=this.options;b<_;b++)k(s=d[b],$.draggable,this.el,!1)&&u.push(s.getAttribute($.dataIdAttr)||function(O){for(var N=O.tagName+O.className+O.src+O.href+O.textContent,j=N.length,Z=0;j--;)Z+=N.charCodeAt(j);return Z.toString(36)}(s));return u},sort:function(s,u){var d={},b=this.el;this.toArray().forEach(function(_,$){$=b.children[$],k($,this.options.draggable,b,!1)&&(d[_]=$)},this),u&&this.captureAnimationState(),s.forEach(function(_){d[_]&&(b.removeChild(d[_]),b.appendChild(d[_]))}),u&&this.animateAll()},save:function(){var s=this.options.store;s&&s.set&&s.set(this)},closest:function(s,u){return k(s,u||this.options.draggable,this.el,!1)},option:function(s,u){var d=this.options;if(u===void 0)return d[s];var b=ge.modifyOption(this,s,u);d[s]=b!==void 0?b:u,s==="group"&&gt(d)},destroy:function(){Le("destroy",this);var s=this.el;s[Be]=null,T(s,"mousedown",this._onTapStart),T(s,"touchstart",this._onTapStart),T(s,"pointerdown",this._onTapStart),this.nativeDraggable&&(T(s,"dragover",this),T(s,"dragenter",this)),Array.prototype.forEach.call(s.querySelectorAll("[draggable]"),function(u){u.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ln.splice(ln.indexOf(this.el),1),this.el=s=null},_hideClone:function(){Tt||(Le("hideClone",this),P.eventCanceled||(g(Ie,"display","none"),this.options.removeCloneOnHide&&Ie.parentNode&&Ie.parentNode.removeChild(Ie),Tt=!0))},_showClone:function(s){s.lastPutMode==="clone"?Tt&&(Le("showClone",this),P.eventCanceled||(X.parentNode!=Ce||this.options.group.revertClone?xt?Ce.insertBefore(Ie,xt):Ce.appendChild(Ie):Ce.insertBefore(Ie,X),this.options.group.revertClone&&this.animate(X,Ie),g(Ie,"display",""),Tt=!1)):this._hideClone()}},Et&&x(document,"touchmove",function(s){(P.active||Lt)&&s.cancelable&&s.preventDefault()}),P.utils={on:x,off:T,css:g,find:v,is:function(s,u){return!!k(s,u,s,!1)},extend:function(s,u){if(s&&u)for(var d in u)u.hasOwnProperty(d)&&(s[d]=u[d]);return s},throttle:Ae,closest:k,toggleClass:S,clone:it,index:Q,nextTick:So,cancelNextTick:Qo,detectDirection:xn,getChild:H},P.get=function(s){return s[Be]},P.mount=function(){for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];(u=u[0].constructor===Array?u[0]:u).forEach(function(b){if(!b.prototype||!b.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(b));b.utils&&(P.utils=e(e({},P.utils),b.utils)),ge.mount(b)})},P.create=function(s,u){return new P(s,u)};var no,er,tr,nr,$o,oo,Ke=[],or=!(P.version="1.15.0");function To(){Ke.forEach(function(s){clearInterval(s.pid)}),Ke=[]}function yi(){clearInterval(oo)}var Ft,rr=Ae(function(s,u,d,b){if(u.scroll){var _,$=(s.touches?s.touches[0]:s).clientX,O=(s.touches?s.touches[0]:s).clientY,N=u.scrollSensitivity,j=u.scrollSpeed,Z=B(),re=!1;er!==d&&(er=d,To(),no=u.scroll,_=u.scrollFn,no===!0&&(no=U(d,!0)));var ke=0,Fe=no;do{var ve=Fe,Ze=W(ve),je=Ze.top,we=Ze.bottom,Ge=Ze.left,bt=Ze.right,De=Ze.width,Ct=Ze.height,vt=void 0,Yt=void 0,Xt=ve.scrollWidth,ao=ve.scrollHeight,Ue=g(ve),qe=ve.scrollLeft,Ze=ve.scrollTop,Yt=ve===Z?(vt=De<Xt&&(Ue.overflowX==="auto"||Ue.overflowX==="scroll"||Ue.overflowX==="visible"),Ct<ao&&(Ue.overflowY==="auto"||Ue.overflowY==="scroll"||Ue.overflowY==="visible")):(vt=De<Xt&&(Ue.overflowX==="auto"||Ue.overflowX==="scroll"),Ct<ao&&(Ue.overflowY==="auto"||Ue.overflowY==="scroll")),qe=vt&&(Math.abs(bt-$)<=N&&qe+De<Xt)-(Math.abs(Ge-$)<=N&&!!qe),Ze=Yt&&(Math.abs(we-O)<=N&&Ze+Ct<ao)-(Math.abs(je-O)<=N&&!!Ze);if(!Ke[ke])for(var Vt=0;Vt<=ke;Vt++)Ke[Vt]||(Ke[Vt]={});Ke[ke].vx==qe&&Ke[ke].vy==Ze&&Ke[ke].el===ve||(Ke[ke].el=ve,Ke[ke].vx=qe,Ke[ke].vy=Ze,clearInterval(Ke[ke].pid),qe==0&&Ze==0||(re=!0,Ke[ke].pid=setInterval(function(){b&&this.layer===0&&P.active._onTouchMove($o);var yt=Ke[this.layer].vy?Ke[this.layer].vy*j:0,An=Ke[this.layer].vx?Ke[this.layer].vx*j:0;typeof _=="function"&&_.call(P.dragged.parentNode[Be],An,yt,s,$o,Ke[this.layer].el)!=="continue"||lt(Ke[this.layer].el,An,yt)}.bind({layer:ke}),24))),ke++}while(u.bubbleScroll&&Fe!==Z&&(Fe=U(Fe,!1)));or=re}},30),ro=function(N){var u=N.originalEvent,d=N.putSortable,b=N.dragEl,_=N.activeSortable,$=N.dispatchSortableEvent,O=N.hideGhostForTarget,N=N.unhideGhostForTarget;u&&(_=d||_,O(),u=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:u,u=document.elementFromPoint(u.clientX,u.clientY),N(),_&&!_.el.contains(u)&&($("spill"),this.onSpill({dragEl:b,putSortable:d})))};function ir(){}function sr(){}ir.prototype={startIndex:null,dragStart:function(s){s=s.oldDraggableIndex,this.startIndex=s},onSpill:function(s){var u=s.dragEl,d=s.putSortable;this.sortable.captureAnimationState(),d&&d.captureAnimationState(),s=H(this.sortable.el,this.startIndex,this.options),s?this.sortable.el.insertBefore(u,s):this.sortable.el.appendChild(u),this.sortable.animateAll(),d&&d.animateAll()},drop:ro},o(ir,{pluginName:"revertOnSpill"}),sr.prototype={onSpill:function(d){var u=d.dragEl,d=d.putSortable||this.sortable;d.captureAnimationState(),u.parentNode&&u.parentNode.removeChild(u),d.animateAll()},drop:ro},o(sr,{pluginName:"removeOnSpill"});var io,Dt,Ne,so,Fo,_e=[],_t=[],lo=!1,pt=!1,In=!1;function ki(s,u){_t.forEach(function(d,b){b=u.children[d.sortableIndex+(s?Number(b):0)],b?u.insertBefore(d,b):u.appendChild(d)})}function Do(){_e.forEach(function(s){s!==Ne&&s.parentNode&&s.parentNode.removeChild(s)})}return P.mount(new function(){function s(){for(var u in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)u.charAt(0)==="_"&&typeof this[u]=="function"&&(this[u]=this[u].bind(this))}return s.prototype={dragStarted:function(u){u=u.originalEvent,this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):this.options.supportPointer?x(document,"pointermove",this._handleFallbackAutoScroll):u.touches?x(document,"touchmove",this._handleFallbackAutoScroll):x(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(u){u=u.originalEvent,this.options.dragOverBubble||u.rootEl||this._handleAutoScroll(u)},drop:function(){this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):(T(document,"pointermove",this._handleFallbackAutoScroll),T(document,"touchmove",this._handleFallbackAutoScroll),T(document,"mousemove",this._handleFallbackAutoScroll)),yi(),To(),clearTimeout(I),I=void 0},nulling:function(){$o=er=no=or=oo=tr=nr=null,Ke.length=0},_handleFallbackAutoScroll:function(u){this._handleAutoScroll(u,!0)},_handleAutoScroll:function(u,d){var b,_=this,$=(u.touches?u.touches[0]:u).clientX,O=(u.touches?u.touches[0]:u).clientY,N=document.elementFromPoint($,O);$o=u,d||this.options.forceAutoScrollFallback||f||c||m?(rr(u,this.options,N,d),b=U(N,!0),!or||oo&&$===tr&&O===nr||(oo&&yi(),oo=setInterval(function(){var j=U(document.elementFromPoint($,O),!0);j!==b&&(b=j,To()),rr(u,_.options,j,d)},10),tr=$,nr=O)):this.options.bubbleScroll&&U(N,!0)!==B()?rr(u,this.options,U(N,!1),!1):To()}},o(s,{pluginName:"scroll",initializeByDefault:!0})}),P.mount(sr,ir),P.mount(new function(){function s(){this.defaults={swapClass:"sortable-swap-highlight"}}return s.prototype={dragStart:function(u){u=u.dragEl,Ft=u},dragOverValid:function(u){var d=u.completed,b=u.target,_=u.onMove,$=u.activeSortable,O=u.changed,N=u.cancel;$.options.swap&&(u=this.sortable.el,$=this.options,b&&b!==u&&(u=Ft,Ft=_(b)!==!1?(S(b,$.swapClass,!0),b):null,u&&u!==Ft&&S(u,$.swapClass,!1)),O(),d(!0),N())},drop:function(u){var d,b,_=u.activeSortable,$=u.putSortable,O=u.dragEl,N=$||this.sortable,j=this.options;Ft&&S(Ft,j.swapClass,!1),Ft&&(j.swap||$&&$.options.swap)&&O!==Ft&&(N.captureAnimationState(),N!==_&&_.captureAnimationState(),b=Ft,u=(d=O).parentNode,j=b.parentNode,u&&j&&!u.isEqualNode(b)&&!j.isEqualNode(d)&&($=Q(d),O=Q(b),u.isEqualNode(j)&&$<O&&O++,u.insertBefore(b,u.children[$]),j.insertBefore(d,j.children[O])),N.animateAll(),N!==_&&_.animateAll())},nulling:function(){Ft=null}},o(s,{pluginName:"swap",eventProperties:function(){return{swapItem:Ft}}})}),P.mount(new function(){function s(u){for(var d in this)d.charAt(0)==="_"&&typeof this[d]=="function"&&(this[d]=this[d].bind(this));u.options.avoidImplicitDeselect||(u.options.supportPointer?x(document,"pointerup",this._deselectMultiDrag):(x(document,"mouseup",this._deselectMultiDrag),x(document,"touchend",this._deselectMultiDrag))),x(document,"keydown",this._checkKeyDown),x(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(b,_){var $="";_e.length&&Dt===u?_e.forEach(function(O,N){$+=(N?", ":"")+O.textContent}):$=_.textContent,b.setData("Text",$)}}}return s.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(u){u=u.dragEl,Ne=u},delayEnded:function(){this.isMultiDrag=~_e.indexOf(Ne)},setupClone:function(b){var d=b.sortable,b=b.cancel;if(this.isMultiDrag){for(var _=0;_<_e.length;_++)_t.push(it(_e[_])),_t[_].sortableIndex=_e[_].sortableIndex,_t[_].draggable=!1,_t[_].style["will-change"]="",S(_t[_],this.options.selectedClass,!1),_e[_]===Ne&&S(_t[_],this.options.chosenClass,!1);d._hideClone(),b()}},clone:function($){var d=$.sortable,b=$.rootEl,_=$.dispatchSortableEvent,$=$.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||_e.length&&Dt===d&&(ki(!0,b),_("clone"),$()))},showClone:function(_){var d=_.cloneNowShown,b=_.rootEl,_=_.cancel;this.isMultiDrag&&(ki(!1,b),_t.forEach(function($){g($,"display","")}),d(),Fo=!1,_())},hideClone:function(_){var d=this,b=(_.sortable,_.cloneNowHidden),_=_.cancel;this.isMultiDrag&&(_t.forEach(function($){g($,"display","none"),d.options.removeCloneOnHide&&$.parentNode&&$.parentNode.removeChild($)}),b(),Fo=!0,_())},dragStartGlobal:function(u){u.sortable,!this.isMultiDrag&&Dt&&Dt.multiDrag._deselectMultiDrag(),_e.forEach(function(d){d.sortableIndex=Q(d)}),_e=_e.sort(function(d,b){return d.sortableIndex-b.sortableIndex}),In=!0},dragStarted:function(_){var d,b=this,_=_.sortable;this.isMultiDrag&&(this.options.sort&&(_.captureAnimationState(),this.options.animation&&(_e.forEach(function($){$!==Ne&&g($,"position","absolute")}),d=W(Ne,!1,!0,!0),_e.forEach(function($){$!==Ne&&dt($,d)}),lo=pt=!0)),_.animateAll(function(){lo=pt=!1,b.options.animation&&_e.forEach(function($){Qe($)}),b.options.sort&&Do()}))},dragOver:function(_){var d=_.target,b=_.completed,_=_.cancel;pt&&~_e.indexOf(d)&&(b(!1),_())},revert:function(u){var d,b,_=u.fromSortable,$=u.rootEl,O=u.sortable,N=u.dragRect;1<_e.length&&(_e.forEach(function(j){O.addAnimationState({target:j,rect:pt?W(j):N}),Qe(j),j.fromRect=N,_.removeAnimationState(j)}),pt=!1,d=!this.options.removeCloneOnHide,b=$,_e.forEach(function(j,Z){Z=b.children[j.sortableIndex+(d?Number(Z):0)],Z?b.insertBefore(j,Z):b.appendChild(j)}))},dragOverCompleted:function(Z){var d,b=Z.sortable,_=Z.isOwner,$=Z.insertion,O=Z.activeSortable,N=Z.parentEl,j=Z.putSortable,Z=this.options;$&&(_&&O._hideClone(),lo=!1,Z.animation&&1<_e.length&&(pt||!_&&!O.options.sort&&!j)&&(d=W(Ne,!1,!0,!0),_e.forEach(function(re){re!==Ne&&(dt(re,d),N.appendChild(re))}),pt=!0),_||(pt||Do(),1<_e.length?(_=Fo,O._showClone(b),O.options.animation&&!Fo&&_&&_t.forEach(function(re){O.addAnimationState({target:re,rect:so}),re.fromRect=so,re.thisAnimationDuration=null})):O._showClone(b)))},dragOverAnimationCapture:function(_){var d=_.dragRect,b=_.isOwner,_=_.activeSortable;_e.forEach(function($){$.thisAnimationDuration=null}),_.options.animation&&!b&&_.multiDrag.isMultiDrag&&(so=o({},d),d=M(Ne,!0),so.top-=d.f,so.left-=d.e)},dragOverAnimationComplete:function(){pt&&(pt=!1,Do())},drop:function(u){var d=u.originalEvent,b=u.rootEl,_=u.parentEl,$=u.sortable,O=u.dispatchSortableEvent,N=u.oldIndex,j=u.putSortable,Z=j||this.sortable;if(d){var re,ke,Fe,ve=this.options,je=_.children;if(!In)if(ve.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),S(Ne,ve.selectedClass,!~_e.indexOf(Ne)),~_e.indexOf(Ne))_e.splice(_e.indexOf(Ne),1),io=null,We({sortable:$,rootEl:b,name:"deselect",targetEl:Ne,originalEvent:d});else{if(_e.push(Ne),We({sortable:$,rootEl:b,name:"select",targetEl:Ne,originalEvent:d}),d.shiftKey&&io&&$.el.contains(io)){var we=Q(io),u=Q(Ne);if(~we&&~u&&we!==u)for(var Ge,bt=we<u?(Ge=we,u):(Ge=u,we+1);Ge<bt;Ge++)~_e.indexOf(je[Ge])||(S(je[Ge],ve.selectedClass,!0),_e.push(je[Ge]),We({sortable:$,rootEl:b,name:"select",targetEl:je[Ge],originalEvent:d}))}else io=Ne;Dt=Z}In&&this.isMultiDrag&&(pt=!1,(_[Be].options.sort||_!==b)&&1<_e.length&&(re=W(Ne),ke=Q(Ne,":not(."+this.options.selectedClass+")"),!lo&&ve.animation&&(Ne.thisAnimationDuration=null),Z.captureAnimationState(),lo||(ve.animation&&(Ne.fromRect=re,_e.forEach(function(De){var Ct;De.thisAnimationDuration=null,De!==Ne&&(Ct=pt?W(De):re,De.fromRect=Ct,Z.addAnimationState({target:De,rect:Ct}))})),Do(),_e.forEach(function(De){je[ke]?_.insertBefore(De,je[ke]):_.appendChild(De),ke++}),N===Q(Ne)&&(Fe=!1,_e.forEach(function(De){De.sortableIndex!==Q(De)&&(Fe=!0)}),Fe&&O("update"))),_e.forEach(function(De){Qe(De)}),Z.animateAll()),Dt=Z),(b===_||j&&j.lastPutMode!=="clone")&&_t.forEach(function(De){De.parentNode&&De.parentNode.removeChild(De)})}},nullingGlobal:function(){this.isMultiDrag=In=!1,_t.length=0},destroyGlobal:function(){this._deselectMultiDrag(),T(document,"pointerup",this._deselectMultiDrag),T(document,"mouseup",this._deselectMultiDrag),T(document,"touchend",this._deselectMultiDrag),T(document,"keydown",this._checkKeyDown),T(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(u){if(!(In!==void 0&&In||Dt!==this.sortable||u&&k(u.target,this.options.draggable,this.sortable.el,!1)||u&&u.button!==0))for(;_e.length;){var d=_e[0];S(d,this.options.selectedClass,!1),_e.shift(),We({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:d,originalEvent:u})}},_checkKeyDown:function(u){u.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(u){u.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},o(s,{pluginName:"multiDrag",utils:{select:function(u){var d=u.parentNode[Be];d&&d.options.multiDrag&&!~_e.indexOf(u)&&(Dt&&Dt!==d&&(Dt.multiDrag._deselectMultiDrag(),Dt=d),S(u,d.options.selectedClass,!0),_e.push(u))},deselect:function(u){var d=u.parentNode[Be],b=_e.indexOf(u);d&&d.options.multiDrag&&~b&&(S(u,d.options.selectedClass,!1),_e.splice(b,1))}},eventProperties:function(){var u=this,d=[],b=[];return _e.forEach(function(_){var $;d.push({multiDragElement:_,index:_.sortableIndex}),$=pt&&_!==Ne?-1:pt?Q(_,":not(."+u.options.selectedClass+")"):Q(_),b.push({multiDragElement:_,index:$})}),{items:i(_e),clones:[].concat(_t),oldIndicies:d,newIndicies:b}},optionListeners:{multiDragKey:function(u){return(u=u.toLowerCase())==="ctrl"?u="Control":1<u.length&&(u=u.charAt(0).toUpperCase()+u.substr(1)),u}}})}),P})});function me(){}var dn=t=>t;function Ei(t,e){for(let n in e)t[n]=e[n];return t}function ur(t){return t()}function Oo(){return Object.create(null)}function ae(t){t.forEach(ur)}function St(t){return typeof t=="function"}function de(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ci(t){return Object.keys(t).length===0}function Io(t,...e){if(t==null){for(let o of e)o(void 0);return me}let n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Jt(t){let e;return Io(t,n=>e=n)(),e}function ee(t,e,n){t.$$.on_destroy.push(Io(e,n))}function Nn(t,e,n,o){if(t){let r=Si(t,e,n,o);return t[0](r)}}function Si(t,e,n,o){return t[1]&&o?Ei(n.ctx.slice(),t[1](o(e))):n.ctx}function Ln(t,e,n,o){if(t[2]&&o){let r=t[2](o(n));if(e.dirty===void 0)return r;if(typeof r=="object"){let i=[],l=Math.max(e.dirty.length,r.length);for(let a=0;a<l;a+=1)i[a]=e.dirty[a]|r[a];return i}return e.dirty|r}return e.dirty}function Pn(t,e,n,o,r,i){if(r){let l=Si(e,n,o,i);t.p(l,r)}}function Bn(t){if(t.ctx.length>32){let e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function st(t,e,n){return t.set(n),e}function fr(t){let e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}var $i=typeof window<"u",uo=$i?()=>window.performance.now():()=>Date.now(),fo=$i?t=>requestAnimationFrame(t):me;var Rn=new Set;function Ti(t){Rn.forEach(e=>{e.c(t)||(Rn.delete(e),e.f())}),Rn.size!==0&&fo(Ti)}function po(t){let e;return Rn.size===0&&fo(Ti),{promise:new Promise(n=>{Rn.add(e={c:t,f:n})}),abort(){Rn.delete(e)}}}var En=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;var No=class t{_listeners="WeakMap"in En?new WeakMap:void 0;_observer=void 0;options;constructor(e){this.options=e}observe(e,n){return this._listeners.set(e,n),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(e=>{for(let n of e)t.entries.set(n.target,n),this._listeners.get(n.target)?.(n)}))}};No.entries="WeakMap"in En?new WeakMap:void 0;var Fi=!1;function Di(){Fi=!0}function Mi(){Fi=!1}function w(t,e){t.appendChild(e)}function dr(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Oi(t){let e=A("style");return e.textContent="/* empty */",ml(dr(t),e),e.sheet}function ml(t,e){return w(t.head||t,e),e.sheet}function D(t,e,n){t.insertBefore(e,n||null)}function F(t){t.parentNode&&t.parentNode.removeChild(t)}function Mt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function Po(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ye(t){return document.createTextNode(t)}function L(){return ye(" ")}function kt(){return ye("")}function q(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function nt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function wt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ot(t){return t===""?null:+t}function Ii(t){return Array.from(t.childNodes)}function Me(t,e){e=""+e,t.data!==e&&(t.data=e)}function xe(t,e){t.value=e??""}function Cn(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function Qt(t,e,n){for(let o=0;o<t.options.length;o+=1){let r=t.options[o];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function jn(t){let e=t.querySelector(":checked");return e&&e.__value}function Ee(t,e,n){t.classList.toggle(e,!!n)}function mo(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}var Lo=class{is_svg=!1;e=void 0;n=void 0;t=void 0;a=void 0;constructor(e=!1){this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,o=null){this.e||(this.is_svg?this.e=Po(n.nodeName):this.e=A(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(o)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)D(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(F)}};function Ni(t){let e={};return t.childNodes.forEach(n=>{e[n.slot||"default"]=!0}),e}var Bo=new Map,Ro=0;function hl(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function gl(t,e){let n={stylesheet:Oi(e),rules:{}};return Bo.set(t,n),n}function qn(t,e,n,o,r,i,l,a=0){let c=16.666/o,f=`{
`;for(let C=0;C<=1;C+=c){let k=e+(n-e)*i(C);f+=C*100+`%{${l(k,1-k)}}
`}let p=f+`100% {${l(n,1-n)}}
}`,m=`__svelte_${hl(p)}_${a}`,y=dr(t),{stylesheet:E,rules:x}=Bo.get(y)||gl(y,t);x[m]||(x[m]=!0,E.insertRule(`@keyframes ${m} ${p}`,E.cssRules.length));let T=t.style.animation||"";return t.style.animation=`${T?`${T}, `:""}${m} ${o}ms linear ${r}ms 1 both`,Ro+=1,m}function Hn(t,e){let n=(t.style.animation||"").split(", "),o=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),r=n.length-o.length;r&&(t.style.animation=o.join(", "),Ro-=r,Ro||_l())}function _l(){fo(()=>{Ro||(Bo.forEach(t=>{let{ownerNode:e}=t.stylesheet;e&&F(e)}),Bo.clear())})}var pn;function en(t){pn=t}function ho(){if(!pn)throw new Error("Function called outside component initialization");return pn}function Pe(t){ho().$$.on_mount.push(t)}function pr(t){ho().$$.after_update.push(t)}function mr(t){ho().$$.on_destroy.push(t)}function hr(){let t=ho();return(e,n,{cancelable:o=!1}={})=>{let r=t.$$.callbacks[e];if(r){let i=mo(e,n,{cancelable:o});return r.slice().forEach(l=>{l.call(t,i)}),!i.defaultPrevented}return!0}}function gr(t,e){let n=t.$$.callbacks[e.type];n&&n.slice().forEach(o=>o.call(this,e))}var Sn=[];var be=[],Gn=[],br=[],Li=Promise.resolve(),vr=!1;function yr(){vr||(vr=!0,Li.then(mn))}function kr(){return yr(),Li}function He(t){Gn.push(t)}function Un(t){br.push(t)}var _r=new Set,Wn=0;function mn(){if(Wn!==0)return;let t=pn;do{try{for(;Wn<Sn.length;){let e=Sn[Wn];Wn++,en(e),bl(e.$$)}}catch(e){throw Sn.length=0,Wn=0,e}for(en(null),Sn.length=0,Wn=0;be.length;)be.pop()();for(let e=0;e<Gn.length;e+=1){let n=Gn[e];_r.has(n)||(_r.add(n),n())}Gn.length=0}while(Sn.length);for(;br.length;)br.pop()();vr=!1,_r.clear(),en(t)}function bl(t){if(t.fragment!==null){t.update(),ae(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(He)}}function Pi(t){let e=[],n=[];Gn.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),Gn=e}var go;function wr(){return go||(go=Promise.resolve(),go.then(()=>{go=null})),go}function $n(t,e,n){t.dispatchEvent(mo(`${e?"intro":"outro"}${n}`))}var jo=new Set,jt;function ot(){jt={r:0,c:[],p:jt}}function rt(){jt.r||ae(jt.c),jt=jt.p}function z(t,e){t&&t.i&&(jo.delete(t),t.i(e))}function V(t,e,n,o){if(t&&t.o){if(jo.has(t))return;jo.add(t),jt.c.push(()=>{jo.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}var xr={duration:0};function Ar(t,e,n){let o={direction:"in"},r=e(t,n,o),i=!1,l,a,c=0;function f(){l&&Hn(t,l)}function p(){let{delay:y=0,duration:E=300,easing:x=dn,tick:T=me,css:C}=r||xr;C&&(l=qn(t,0,1,E,y,x,C,c++)),T(0,1);let k=uo()+y,I=k+E;a&&a.abort(),i=!0,He(()=>$n(t,!0,"start")),a=po(R=>{if(i){if(R>=I)return T(1,0),$n(t,!0,"end"),f(),i=!1;if(R>=k){let S=x((R-k)/E);T(S,1-S)}}return i})}let m=!1;return{start(){m||(m=!0,Hn(t),St(r)?(r=r(o),wr().then(p)):p())},invalidate(){m=!1},end(){i&&(f(),i=!1)}}}function Er(t,e,n){let o={direction:"out"},r=e(t,n,o),i=!0,l,a=jt;a.r+=1;let c;function f(){let{delay:p=0,duration:m=300,easing:y=dn,tick:E=me,css:x}=r||xr;x&&(l=qn(t,1,0,m,p,y,x));let T=uo()+p,C=T+m;He(()=>$n(t,!1,"start")),"inert"in t&&(c=t.inert,t.inert=!0),po(k=>{if(i){if(k>=C)return E(0,1),$n(t,!1,"end"),--a.r||ae(a.c),!1;if(k>=T){let I=y((k-T)/m);E(1-I,I)}}return i})}return St(r)?wr().then(()=>{r=r(o),f()}):f(),{end(p){p&&"inert"in t&&(t.inert=c),p&&r.tick&&r.tick(1,0),i&&(l&&Hn(t,l),i=!1)}}}function tn(t,e,n,o){let i=e(t,n,{direction:"both"}),l=o?0:1,a=null,c=null,f=null,p;function m(){f&&Hn(t,f)}function y(x,T){let C=x.b-l;return T*=Math.abs(C),{a:l,b:x.b,d:C,duration:T,start:x.start,end:x.start+T,group:x.group}}function E(x){let{delay:T=0,duration:C=300,easing:k=dn,tick:I=me,css:R}=i||xr,S={start:uo()+T,b:x};x||(S.group=jt,jt.r+=1),"inert"in t&&(x?p!==void 0&&(t.inert=p):(p=t.inert,t.inert=!0)),a||c?c=S:(R&&(m(),f=qn(t,l,x,C,T,k,R)),x&&I(0,1),a=y(S,C),He(()=>$n(t,x,"start")),po(g=>{if(c&&g>c.start&&(a=y(c,C),c=null,$n(t,a.b,"start"),R&&(m(),f=qn(t,l,a.b,a.duration,0,k,i.css))),a){if(g>=a.end)I(l=a.b,1-l),$n(t,a.b,"end"),c||(a.b?m():--a.group.r||ae(a.group.c)),a=null;else if(g>=a.start){let M=g-a.start;l=a.a+a.d*k(M/a.duration),I(l,1-l)}}return!!(a||c)}))}return{run(x){St(i)?wr().then(()=>{i=i({direction:x?"in":"out"}),E(x)}):E(x)},end(){m(),a=c=null}}}function $e(t){return t?.length!==void 0?t:Array.from(t)}function Bi(t,e){t.d(1),e.delete(t.key)}function zn(t,e){V(t,1,1,()=>{e.delete(t.key)})}function hn(t,e,n,o,r,i,l,a,c,f,p,m){let y=t.length,E=i.length,x=y,T={};for(;x--;)T[t[x].key]=x;let C=[],k=new Map,I=new Map,R=[];for(x=E;x--;){let v=m(r,i,x),B=n(v),W=l.get(B);W?o&&R.push(()=>W.p(v,e)):(W=f(B,v),W.c()),k.set(B,C[x]=W),B in T&&I.set(B,Math.abs(x-T[B]))}let S=new Set,g=new Set;function M(v){z(v,1),v.m(a,p),l.set(v.key,v),p=v.first,E--}for(;y&&E;){let v=C[E-1],B=t[y-1],W=v.key,ue=B.key;v===B?(p=v.first,y--,E--):k.has(ue)?!l.has(W)||S.has(W)?M(v):g.has(ue)?y--:I.get(W)>I.get(ue)?(g.add(W),M(v)):(S.add(ue),y--):(c(B,l),y--)}for(;y--;){let v=t[y];k.has(v.key)||c(v,l)}for(;E;)M(C[E-1]);return ae(R),C}var vl=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],yl=new Set([...vl]);function Xn(t,e,n){let o=t.$$.props[e];o!==void 0&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function ce(t){t&&t.c()}function ie(t,e,n){let{fragment:o,after_update:r}=t.$$;o&&o.m(e,n),He(()=>{let i=t.$$.on_mount.map(ur).filter(St);t.$$.on_destroy?t.$$.on_destroy.push(...i):ae(i),t.$$.on_mount=[]}),r.forEach(He)}function se(t,e){let n=t.$$;n.fragment!==null&&(Pi(n.after_update),ae(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function wl(t,e){t.$$.dirty[0]===-1&&(Sn.push(t),yr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pe(t,e,n,o,r,i,l,a=[-1]){let c=pn;en(t);let f=t.$$={fragment:null,ctx:[],props:i,update:me,not_equal:r,bound:Oo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Oo(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};l&&l(f.root);let p=!1;if(f.ctx=n?n(t,e.props||{},(m,y,...E)=>{let x=E.length?E[0]:y;return f.ctx&&r(f.ctx[m],f.ctx[m]=x)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](x),p&&wl(t,m)),y}):[],f.update(),p=!0,ae(f.before_update),f.fragment=o?o(f.ctx):!1,e.target){if(e.hydrate){Di();let m=Ii(e.target);f.fragment&&f.fragment.l(m),m.forEach(F)}else f.fragment&&f.fragment.c();e.intro&&z(t.$$.fragment),ie(t,e.target,e.anchor),Mi(),mn()}en(c)}var xl;typeof HTMLElement=="function"&&(xl=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(t,e,n){super(),this.$$ctor=t,this.$$s=e,n&&this.attachShadow({mode:"open"})}addEventListener(t,e,n){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(e),this.$$c){let o=this.$$c.$on(t,e);this.$$l_u.set(e,o)}super.addEventListener(t,e,n)}removeEventListener(t,e,n){if(super.removeEventListener(t,e,n),this.$$c){let o=this.$$l_u.get(e);o&&(o(),this.$$l_u.delete(e))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(r){return()=>{let i;return{c:function(){i=A("slot"),r!=="default"&&h(i,"name",r)},m:function(c,f){D(c,i,f)},d:function(c){c&&F(i)}}}};if(await Promise.resolve(),!this.$$cn)return;let e={},n=Ni(this);for(let r of this.$$s)r in n&&(e[r]=[t(r)]);for(let r of this.attributes){let i=this.$$g_p(r.name);i in this.$$d||(this.$$d[i]=Cr(i,r.value,this.$$p_d,"toProp"))}this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:e,$$scope:{ctx:[]}}});let o=()=>{this.$$r=!0;for(let r in this.$$p_d)if(this.$$d[r]=this.$$c.$$.ctx[this.$$c.$$.props[r]],this.$$p_d[r].reflect){let i=Cr(r,this.$$d[r],this.$$p_d,"toAttribute");i==null?this.removeAttribute(r):this.setAttribute(this.$$p_d[r].attribute||r,i)}this.$$r=!1};this.$$c.$$.after_update.push(o),o();for(let r in this.$$l)for(let i of this.$$l[r]){let l=this.$$c.$on(r,i);this.$$l_u.set(i,l)}this.$$l={}}}attributeChangedCallback(t,e,n){this.$$r||(t=this.$$g_p(t),this.$$d[t]=Cr(t,n,this.$$p_d,"toProp"),this.$$c?.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(t){return Object.keys(this.$$p_d).find(e=>this.$$p_d[e].attribute===t||!this.$$p_d[e].attribute&&e.toLowerCase()===t)||t}});function Cr(t,e,n,o){let r=n[t]?.type;if(e=r==="Boolean"&&typeof e!="boolean"?e!=null:e,!o||!n[t])return e;if(o==="toAttribute")switch(r){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(r){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}var fe=class{$$=void 0;$$set=void 0;$destroy(){se(this,1),this.$destroy=me}$on(e,n){if(!St(n))return me;let o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{let r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(e){this.$$set&&!Ci(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var Ri="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ri);var ze=cr(qi());var $r="CustomCSS";function Tr(t,e=$r){let n=document.getElementById(e);n&&n.remove(),t=t.replace(/\n/g," ").replace(/<br>/g," "),t&&(n=document.createElement("STYLE"),n.id=e,n.innerText=t,document.head.appendChild(n))}function Hi(t=""){let e=document.getElementById($r);if(!e)return!0;e.title=e.id;let n=Array.from(document.styleSheets).find(i=>i.title===$r);if(t.length<3)return!0;if(!n.rules.length)return!1;let o=t.split("{").length,r=t.split("}").length;return e.id=e.title,e.removeAttribute("title"),!(!o||!r||o!==r)}function Al(t){return/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}(:\d{1,7})?$/g.test(t)}function _o(t){let e;try{e=new URL(t)}catch{}return e=e.host.replace(/^www\./,""),Al(e)?e:e.split(".").slice(-2).join(".")}function El(t){let e=0;for(let o=0;o<t.length;o++)e=t.charCodeAt(o)+((e<<5)-e);let n="#";for(let o=0;o<3;o++){let r=e>>o*8&255;n+=("00"+r.toString(16)).substr(-2)}return n}function Cl(t){let e=t.replace("#",""),n=parseInt(e.substr(0,2),16),o=parseInt(e.substr(2,2),16),r=parseInt(e.substr(4,2),16);return(n*299+o*587+r*114)/1e3<80}function bo(t){let e=El(t.url.replace(/(^https?:\/\/)|(\/$)/g,"")),n=Cl(e)?"#fffd":"#000d";return`background-color: ${e}; color: ${n};`}function Wi(t="",e=""){t=t.toLowerCase(),e=e.toLowerCase();let n=-1;for(let o of e)if(!~(n=t.indexOf(o,n+1)))return!1;return!0}function Gi(t,e){if(!e)return t;t=""+t;let n=0,o=t.toLowerCase();if(o.includes(e))return t.replace(new RegExp(`(${e})`,"ig"),"<b>$1</b>");let r=t.split("");e=e.toLowerCase();for(let i of e){n=o.indexOf(i,n);let l=r[n];l&&(r.splice(n,1,`<b>${l}</b>`),n+=1)}return r.join("")}function Ui(t,e,n,o={}){let i=Object.assign({},{duration:300,easing:"ease-out",fill:"forwards"},o);return new Promise(l=>{let a=t.animate([e,n],i);a.oncancel=l,a.onfinish=l})}function qo(t){return JSON.parse(JSON.stringify(t))}function zi(t,e){return JSON.stringify(t)===JSON.stringify(e)}function Xi(t){let e=document.createElement("INPUT");e.value=t,e.style="position: fixed; left: -1000px; top: -1000px;",document.body.appendChild(e);try{e.select(),e.setSelectionRange(0,99999),document.execCommand("copy")}catch(n){console.error(n)}setTimeout(()=>e.remove())}function Fr(t=[]){let e=[];for(let n=0;n<t.length;n++){let o=t[n];if(o.children){let r=Fr(o.children);e.push(...r),o.type="folder"}else o.type="bookmark";e.push(o)}return e}function Yi(t){return!t||!t.length?[]:t[0].children.map(e=>(e.type||(e.children?e.type="folder":e.type="bookmark"),e.url&&e.url.startsWith("about:reader")&&(e.url=e.url.replace("about:reader?url=",""),e.url=decodeURIComponent(e.url)),e))}function Vi(t){if(!t)return!1;let e=["png","jpg","jpeg","gif","svg","webp"],n=t.split(".").pop();return e.includes(n)}function Yn(t,e=20){return t.length<e?t:t.substr(0,e-3)+"..."}var Ki=ze.default.extension&&ze.default.extension.getURL&&ze.default.extension.getURL("/")&&ze.default.extension.getURL("/").startsWith("chrome"),Zi=()=>ze.default.storage.local.get("settings").then(t=>t&&t.settings),Ji=t=>ze.default.storage.local.set({settings:t}),Ho=t=>ze.default.bookmarks.get(t).then(e=>e[0].title).catch(()=>{}),Wo=t=>ze.default.bookmarks.getSubTree(t).then(Yi).catch(()=>{}),Go=t=>ze.default.bookmarks.get(t).then(e=>e.length&&e[0]).catch(()=>{}),Qi=t=>ze.default.bookmarks.update(t.id,{title:t.title,url:t.url}),es=t=>ze.default.bookmarks.remove(t),ts=t=>ze.default.bookmarks.create(t),Uo=(t,{parentId:e,index:n})=>ze.default.bookmarks.move(t,{parentId:e,index:n}),Vn=()=>ze.default.bookmarks.getTree().then(t=>(t[0].title=t[0].title||"All Bookmarks",Fr(t))),ns=()=>ze.default.storage.local.clear(),zo=()=>ze.default.storage.local.get("thumbs").then(t=>t&&t.thumbs),Xo=t=>ze.default.storage.local.set({thumbs:t}),os=()=>ze.default.storage.local.get("dockedFolders").then(t=>t&&t.dockedFolders),vo=t=>ze.default.storage.local.set({dockedFolders:t}),rs=t=>ze.default.tabs.create(t),is=t=>ze.default.windows.create(t);var Kn={};function ss(t,...e){Kn[t]&&Kn[t].forEach(n=>{typeof n=="function"&&n.apply(n,e)})}function ls(t,e){Kn[t]||(Kn[t]=[]),Kn[t].push(e)}function as(t,e){let n=Kn[t];if(e=e.toString(),!n)return;let o=n.findIndex(r=>r.toString()===e);o>-1&&n.splice(o,1)}var G={on:ls,off:as,fire:ss,bookmark:{added:"bookmark-added",moved:"bookmark-moved",removed:"bookmark-removed",edit:"bookmark-edit",delete:"bookmark-delete",saved:"bookmark-saved",deleteThumb:"bookmark-thumb-del",clearThumb:"bookmark-thumb-clear",changeThumb:"bookmark-thumb-change",thumbDropped:"bookmark-thumb-dropped"},dockedFolders:{loaded:"docked-folders-loaded",changed:"docked-folders-changed"},document:{clicked:"document-clicked",localLink:"opening-local-link"},iconPicker:{open:"open-icon-picker",picked:"icon-picker-picked"},search:{toggle:"search-toggle",open:"search-open"},settings:{loaded:"settings-loaded",imported:"settings-imported"}};var Zn=[];function Dr(t,e){return{subscribe:ct(t,e).subscribe}}function ct(t,e=me){let n,o=new Set;function r(a){if(de(t,a)&&(t=a,n)){let c=!Zn.length;for(let f of o)f[1](),Zn.push(f,t);if(c){for(let f=0;f<Zn.length;f+=2)Zn[f][0](Zn[f+1]);Zn.length=0}}}function i(a){r(a(t))}function l(a,c=me){let f=[a,c];return o.add(f),o.size===1&&(n=e(r,i)||me),a(t),()=>{o.delete(f),o.size===0&&n&&(n(),n=null)}}return{set:r,update:i,subscribe:l}}function cs(t,e,n){let o=!Array.isArray(t),r=o?[t]:t;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");let i=e.length<2;return Dr(n,(l,a)=>{let c=!1,f=[],p=0,m=me,y=()=>{if(p)return;m();let x=e(o?f[0]:f,l,a);i?l(x):m=St(x)?x:me},E=r.map((x,T)=>Io(x,C=>{f[T]=C,p&=~(1<<T),c&&y()},()=>{p|=1<<T}));return c=!0,y(),function(){ae(E),m(),c=!1}})}function us(t){let e="https://www.google.com/s2/favicons?domain=",n;try{n=new URL(t)}catch{}return!n||!n.host?"":e+n.host}var Sl="https://api.github.com/repos/perfect-things/perfect-home-themes/git/trees/master?recursive=1",$l="https://raw.githubusercontent.com/perfect-things/perfect-home-themes/master/";function Tl(t){if(!t||!t.tree)return[];let e=t.tree.filter(i=>i.type==="tree").map(i=>i.path.replace("theme-","")),n=t.tree.filter(i=>i.type==="blob"&&i.path.endsWith(".png")),o=t.tree.filter(i=>i.type==="blob"&&i.path.endsWith(".css")),r={};return e.forEach(i=>{let l="theme-"+i;r[i]={icons:[],css:""},r[i].icons=n.filter(a=>a.path.startsWith(l)).map(({path:a,url:c})=>{let f=a.replace(l+"/","").replace(".png",""),p=`${$l}${a}`;return{name:f,url:c,path:a,imgUrl:p}}).filter(a=>!a.name.startsWith("_")),r[i].css=o.filter(a=>a.path.startsWith(l)).map(a=>a.url).pop()||""}),r}function fs(){return fetch(Sl).then(t=>t.json()).then(Tl).catch(t=>console.error(t))}function ds(t){return t?fetch(t).then(e=>e.json()).then(e=>e&&e.content?atob(e.content||""):"").catch(()=>{}):Promise.resolve("")}function ps(t){return t?fetch(t).then(e=>e.json()).then(e=>"data:image/png;base64,"+(e&&e.content||"").replace(/\n/g,"")).catch(()=>{}):Promise.resolve("")}var ms={pageTitle:"New Tab",gridMaxWidth:1e3,iconWidth:150,iconHeight:140,gridGap:30,pageColor:"#eeeeee",pageBg:"#333333",showLabels:!0,animSpeed:250,openLinksInNewTab:!1,css:"",theme:"",themeCSS:"",rootFolder:Ki?"0":"root________",allowGH:!1,allowGoogle:!1},ft=ct(""),hs=cs(ft,(t,e)=>{Ho(t).then(e)}),Ko=Dr(ms),te=ct(ms),nn=ct([]),qt=ct({});zo().then(t=>{t&&qt.set(t),qt.subscribe(Xo)});var ut=ct([]);os().then(t=>{t&&ut.set(t),ut.subscribe(vo),G.fire(G.dockedFolders.loaded)});var yo=ct(!0),Jn=ct(!1),Ht=ct(!1);function Qn(t){return Jt(te).allowGoogle?us(t):"bookmark.svg"}var Yo=ct([]),Vo=ct([]);function Fl(){let{subscribe:t,set:e}=ct({});function n(){if(!Jt(Yo).length)return Jt(te).allowGH?fs().then(i=>{i&&(e(i),Yo.set(Object.keys(i))),o()}):Promise.resolve({})}function o(){let i=Jt(te),l=Jt(Wt),a=Object.keys(l).length&&i.theme&&l[i.theme];if(a){if(Vo.set(a.icons),!Jt(te).allowGH)return;ds(a.css).then(c=>{i.themeCSS=(""+c).replace(/[\n\t]/g,""),te.set(i)})}else Vo.set([]),i.themeCSS="",te.set(i)}function r(i){return Jt(te).allowGH?ps(i):Promise.resolve({})}return{subscribe:t,load:n,apply:o,getIcon:r,reset:()=>e(0)}}var Wt=Fl();function gs(t){let e,n,o;return{c(){e=A("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z" style="fill:currentColor"></path></svg>',h(e,"class","icon-btn btn-back"),h(e,"title","Go back")},m(r,i){D(r,e,i),n||(o=q(e,"click",Nl),n=!0)},p:me,d(r){r&&F(e),n=!1,o()}}}function _s(t){let e;function n(i,l){return i[3].length?i[4]?Ml:Dl:Ol}let o=n(t,-1),r=o(t);return{c(){r.c(),e=kt()},m(i,l){r.m(i,l),D(i,e,l)},p(i,l){o===(o=n(i,l))&&r?r.p(i,l):(r.d(1),r=o(i),r&&(r.c(),r.m(e.parentNode,e)))},d(i){i&&F(e),r.d(i)}}}function Dl(t){let e;return{c(){e=ye("All Bookmarks")},m(n,o){D(n,e,o)},p:me,d(n){n&&F(e)}}}function Ml(t){let e;return{c(){e=ye(t[4])},m(n,o){D(n,e,o)},p(n,o){o&16&&Me(e,n[4])},d(n){n&&F(e)}}}function Ol(t){let e,n,o,r,i;return{c(){e=A("p"),n=ye(`Add some links to
				"`),o=A("b"),r=ye(t[4]),i=ye(`"
				folder in your bookmarks.`)},m(l,a){D(l,e,a),w(e,n),w(e,o),w(o,r),w(e,i)},p(l,a){a&16&&Me(r,l[4])},d(l){l&&F(e)}}}function Il(t){let e,n,o,r,i,l,a,c=t[0]&&t[1]!==t[2].rootFolder&&gs(t),f=t[0]&&_s(t);return{c(){e=A("button"),e.innerHTML='<svg style="fill:currentColor" aria-label="Search" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px"><path d="M 21 3 C 11.601563 3 4 10.601563 4 20 C 4 29.398438 11.601563 37 21 37 C 24.355469 37 27.460938 36.015625 30.09375 34.34375 L 42.375 46.625 L 46.625 42.375 L 34.5 30.28125 C 36.679688 27.421875 38 23.878906 38 20 C 38 10.601563 30.398438 3 21 3 Z M 21 7 C 28.199219 7 34 12.800781 34 20 C 34 27.199219 28.199219 33 21 33 C 13.800781 33 8 27.199219 8 20 C 8 12.800781 13.800781 7 21 7 Z"></path></svg>',n=L(),o=A("header"),c&&c.c(),r=L(),i=A("h1"),f&&f.c(),h(e,"class","icon-btn btn-search"),h(e,"title","Search (Meta+P)"),h(i,"class","title")},m(p,m){D(p,e,m),D(p,n,m),D(p,o,m),c&&c.m(o,null),w(o,r),w(o,i),f&&f.m(i,null),l||(a=q(e,"click",wt(t[5])),l=!0)},p(p,[m]){p[0]&&p[1]!==p[2].rootFolder?c?c.p(p,m):(c=gs(p),c.c(),c.m(o,r)):c&&(c.d(1),c=null),p[0]?f?f.p(p,m):(f=_s(p),f.c(),f.m(i,null)):f&&(f.d(1),f=null)},i:me,o:me,d(p){p&&(F(e),F(n),F(o)),c&&c.d(),f&&f.d(),l=!1,a()}}}function Nl(){history.back()}function Ll(t,e,n){let o,r,i,l,a;ee(t,Jn,f=>n(0,o=f)),ee(t,ft,f=>n(1,r=f)),ee(t,te,f=>n(2,i=f)),ee(t,nn,f=>n(3,l=f)),ee(t,hs,f=>n(4,a=f));function c(){G.fire(G.search.toggle)}return[o,r,i,l,a,c]}var Mr=class extends fe{constructor(e){super(),pe(this,e,Ll,Il,de,{})}},Or=Mr;function Pl(t){let e,n,o=t[2].default,r=Nn(o,t,t[1],null);return{c(){e=A("span"),r&&r.c(),h(e,"class","text-fit")},m(i,l){D(i,e,l),r&&r.m(e,null),t[3](e),n=!0},p(i,[l]){r&&r.p&&(!n||l&2)&&Pn(r,o,i,i[1],n?Ln(o,i[1],l,null):Bn(i[1]),null)},i(i){n||(z(r,i),n=!0)},o(i){V(r,i),n=!1},d(i){i&&F(e),r&&r.d(i),t[3](null)}}}var Bl=30,Rl=100;function jl(t,e,n){let{$$slots:o={},$$scope:r}=e,i,l,a,c,f;function p(){n(0,i.style.transform="",i);let y=i.getBoundingClientRect().width,E=l.getBoundingClientRect().width,x=Math.min((E-Bl)/y,1);n(0,i.style.transform=`matrix(${x}, 0, 0, ${x}, 0, 0)`,i)}Pe(()=>{l=i.parentNode,window.ResizeObserver&&(a=new ResizeObserver(()=>{c&&clearTimeout(c),c=setTimeout(p,Rl)}),a.observe(l),f=new MutationObserver(p),f.observe(i.firstChild,{characterData:!0}),p())}),mr(()=>{window.ResizeObserver&&(a.unobserve(l),f.disconnect())});function m(y){be[y?"unshift":"push"](()=>{i=y,n(0,i)})}return t.$$set=y=>{"$$scope"in y&&n(1,r=y.$$scope)},[i,r,o,m]}var Ir=class extends fe{constructor(e){super(),pe(this,e,jl,Pl,de,{})}},ko=Ir;function Zo(t){let e=t-1;return e*e*e+1}function Nr(t,{delay:e=0,duration:n=400,easing:o=dn}={}){let r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:i=>`opacity: ${i*r}`}}function Lr(t,{delay:e=0,duration:n=400,easing:o=Zo,x:r=0,y:i=0,opacity:l=0}={}){let a=getComputedStyle(t),c=+a.opacity,f=a.transform==="none"?"":a.transform,p=c*(1-l),[m,y]=fr(r),[E,x]=fr(i);return{delay:e,duration:n,easing:o,css:(T,C)=>`
			transform: ${f} translate(${(1-T)*m}${y}, ${(1-T)*E}${x});
			opacity: ${c-p*C}`}}function Pr(t,{delay:e=0,duration:n=400,easing:o=Zo,axis:r="y"}={}){let i=getComputedStyle(t),l=+i.opacity,a=r==="y"?"height":"width",c=parseFloat(i[a]),f=r==="y"?["top","bottom"]:["left","right"],p=f.map(k=>`${k[0].toUpperCase()}${k.slice(1)}`),m=parseFloat(i[`padding${p[0]}`]),y=parseFloat(i[`padding${p[1]}`]),E=parseFloat(i[`margin${p[0]}`]),x=parseFloat(i[`margin${p[1]}`]),T=parseFloat(i[`border${p[0]}Width`]),C=parseFloat(i[`border${p[1]}Width`]);return{delay:e,duration:n,easing:o,css:k=>`overflow: hidden;opacity: ${Math.min(k*20,1)*l};${a}: ${k*c}px;padding-${f[0]}: ${k*m}px;padding-${f[1]}: ${k*y}px;margin-${f[0]}: ${k*E}px;margin-${f[1]}: ${k*x}px;border-${f[0]}-width: ${k*T}px;border-${f[1]}-width: ${k*C}px;`}}function Br(t,{delay:e=0,duration:n=400,easing:o=Zo,start:r=0,opacity:i=0}={}){let l=getComputedStyle(t),a=+l.opacity,c=l.transform==="none"?"":l.transform,f=1-r,p=a*(1-i);return{delay:e,duration:n,easing:o,css:(m,y)=>`
			transform: ${c} scale(${1-f*y});
			opacity: ${a-p*y}
		`}}function ql(t){let e,n,o,r,i,l,a,c,f,p,m=(Yn(t[0].title,40)||"")+"",y,E,x,T,C,k,I,R,S,g,M;return o=new ko({props:{$$slots:{default:[Gl]},$$scope:{ctx:t}}}),{c(){e=A("a"),n=A("span"),ce(o.$$.fragment),r=L(),i=A("span"),l=ye(t[4]),a=L(),c=A("span"),f=L(),p=A("span"),y=ye(m),h(i,"class","item-thumb-suffix"),h(n,"class","item-thumb"),Ee(n,"img-drag",t[5]),h(c,"class","item-favicon"),h(p,"class","item-title"),h(e,"href",E=t[0].url),h(e,"class",x="item item-"+t[0].type+" item-"+t[0].id),h(e,"title",T=t[0].title||""),h(e,"data-id",C=t[0].id),h(e,"target",k=t[7].openLinksInNewTab?"_blank":"_self")},m(v,B){D(v,e,B),w(e,n),ie(o,n,null),w(n,r),w(n,i),w(i,l),t[17](n),w(e,a),w(e,c),t[20](c),w(e,f),w(e,p),w(p,y),S=!0,g||(M=[q(n,"dragenter",wt(nt(t[18])),!0),q(n,"dragleave",wt(nt(t[19])),!0),q(n,"drop",wt(nt(t[11])),!0),q(e,"click",t[12])],g=!0)},p(v,B){let W={};B&16777224&&(W.$$scope={dirty:B,ctx:v}),o.$set(W),(!S||B&16)&&Me(l,v[4]),(!S||B&32)&&Ee(n,"img-drag",v[5]),(!S||B&1)&&m!==(m=(Yn(v[0].title,40)||"")+"")&&Me(y,m),(!S||B&1&&E!==(E=v[0].url))&&h(e,"href",E),(!S||B&1&&x!==(x="item item-"+v[0].type+" item-"+v[0].id))&&h(e,"class",x),(!S||B&1&&T!==(T=v[0].title||""))&&h(e,"title",T),(!S||B&1&&C!==(C=v[0].id))&&h(e,"data-id",C),(!S||B&128&&k!==(k=v[7].openLinksInNewTab?"_blank":"_self"))&&h(e,"target",k)},i(v){S||(z(o.$$.fragment,v),v&&He(()=>{S&&(R&&R.end(1),I=Ar(e,t[9],{}),I.start())}),S=!0)},o(v){V(o.$$.fragment,v),I&&I.invalidate(),v&&(R=Er(e,t[10],{})),S=!1},d(v){v&&F(e),se(o),t[17](null),t[20](null),v&&R&&R.end(),g=!1,ae(M)}}}function Hl(t){let e,n,o,r,i=((t[7].showLabels||!t[6][t[0].id])&&Yn(t[0].title,40)||"")+"",l,a,c,f,p,m,y,E,x,T;return{c(){e=A("a"),n=A("span"),o=L(),r=A("span"),l=ye(i),h(n,"class","item-thumb"),Ee(n,"img-drag",t[5]),h(r,"class","item-title"),Ee(r,"img-drag",t[5]),h(e,"href",a=t[0].id),h(e,"class",c="item item-folder item-"+t[0].id),h(e,"title",f=t[0].title||""),h(e,"data-id",p=t[0].id)},m(C,k){D(C,e,k),w(e,n),t[13](n),w(e,o),w(e,r),w(r,l),E=!0,x||(T=[q(n,"dragenter",wt(nt(t[14])),!0),q(n,"dragleave",wt(nt(t[15])),!0),q(n,"drop",wt(nt(t[11])),!0),q(e,"click",nt(t[16]))],x=!0)},p(C,k){(!E||k&32)&&Ee(n,"img-drag",C[5]),(!E||k&193)&&i!==(i=((C[7].showLabels||!C[6][C[0].id])&&Yn(C[0].title,40)||"")+"")&&Me(l,i),(!E||k&32)&&Ee(r,"img-drag",C[5]),(!E||k&1&&a!==(a=C[0].id))&&h(e,"href",a),(!E||k&1&&c!==(c="item item-folder item-"+C[0].id))&&h(e,"class",c),(!E||k&1&&f!==(f=C[0].title||""))&&h(e,"title",f),(!E||k&1&&p!==(p=C[0].id))&&h(e,"data-id",p)},i(C){E||(C&&He(()=>{E&&(y&&y.end(1),m=Ar(e,t[9],{}),m.start())}),E=!0)},o(C){m&&m.invalidate(),C&&(y=Er(e,t[10],{})),E=!1},d(C){C&&F(e),t[13](null),C&&y&&y.end(),x=!1,ae(T)}}}function Wl(t){let e,n,o;return{c(){e=A("div"),n=A("span"),h(n,"class","item-thumb"),h(e,"class","item separator"),h(e,"data-id",o=t[0].id)},m(r,i){D(r,e,i),w(e,n)},p(r,i){i&1&&o!==(o=r[0].id)&&h(e,"data-id",o)},i:me,o:me,d(r){r&&F(e)}}}function Gl(t){let e;return{c(){e=ye(t[3])},m(n,o){D(n,e,o)},p(n,o){o&8&&Me(e,n[3])},d(n){n&&F(e)}}}function Ul(t){let e,n,o,r,i=[Wl,Hl,ql],l=[];function a(c,f){return c[0].type==="separator"?0:c[0].type==="folder"?1:2}return e=a(t,-1),n=l[e]=i[e](t),{c(){n.c(),o=kt()},m(c,f){l[e].m(c,f),D(c,o,f),r=!0},p(c,[f]){let p=e;e=a(c,f),e===p?l[e].p(c,f):(ot(),V(l[p],1,1,()=>{l[p]=null}),rt(),n=l[e],n?n.p(c,f):(n=l[e]=i[e](c),n.c()),z(n,1),n.m(o.parentNode,o))},i(c){r||(z(n),r=!0)},o(c){V(n),r=!1},d(c){c&&F(o),l[e].d(c)}}}function zl(t,e,n){let o,r,i,l,a;ee(t,qt,H=>n(6,o=H)),ee(t,Ht,H=>n(21,r=H)),ee(t,te,H=>n(7,i=H)),ee(t,yo,H=>n(22,l=H)),ee(t,ft,H=>n(8,a=H));let{item:c}=e,f,p,m="",y="",E=!1;function x(H){if(!(!i.animSpeed||l))return Nr(H,{delay:Math.max(i.animSpeed-50,0),duration:i.animSpeed})}function T(H){if(!(!i.animSpeed||l))return Nr(H,{duration:Math.max(i.animSpeed-50,0)})}function C(H){n(5,E=!1);let Q=H.dataTransfer.files,K=Q.length&&Q[0];if(!K)return;let U=new FileReader;U.onload=ne=>G.fire(G.bookmark.thumbDropped,c,ne.target.result),U.readAsDataURL(K)}function k(H){if(r&&H.preventDefault(),!!c.url&&c.url.startsWith("file://"))try{location.href=c.url}catch{G.fire(G.document.localLink)}}function I(H){c.id===H.id&&n(0,c=H)}Pe(()=>{G.on(G.bookmark.saved,I)}),pr(()=>{if(!f)return;let H="";n(3,m=""),n(4,y=""),o&&o[c.id]?H=`background-image: url("${o[c.id]}"); background-color: unset; -webkit-mask: none; mask: none;`:Vi(c.url)?H=`background-image: url("${c.url}"); background-color: unset;`:c.type==="bookmark"&&c.url&&(H=bo(c),n(3,m=Yn(c.title,20)),n(4,y=_o(c.url))),p&&n(2,p.style=`background-image: url("${Qn(c.url)}")`,p),n(1,f.style=H,f)});function R(H){be[H?"unshift":"push"](()=>{f=H,n(1,f)})}let S=()=>n(5,E=!0),g=()=>n(5,E=!1),M=()=>st(ft,a=c.id,a);function v(H){be[H?"unshift":"push"](()=>{f=H,n(1,f)})}let B=()=>n(5,E=!0),W=()=>n(5,E=!1);function ue(H){be[H?"unshift":"push"](()=>{p=H,n(2,p)})}return t.$$set=H=>{"item"in H&&n(0,c=H.item)},[c,f,p,m,y,E,o,i,a,x,T,C,k,R,S,g,M,v,B,W,ue]}var Rr=class extends fe{constructor(e){super(),pe(this,e,zl,Ul,de,{item:0})}},wo=Rr;var ks=cr(Hr()),{window:Xl}=En;function bs(t,e,n){let o=t.slice();return o[14]=e[n],o}function vs(t){let e=[],n=new Map,o,r,i=$e(t[0]),l=a=>a[14].id;for(let a=0;a<i.length;a+=1){let c=bs(t,i,a),f=l(c);n.set(f,e[a]=ys(f,c))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();o=kt()},m(a,c){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,c);D(a,o,c),r=!0},p(a,c){c&1&&(i=$e(a[0]),ot(),e=hn(e,c,l,1,a,i,n,o.parentNode,zn,ys,o,bs),rt())},i(a){if(!r){for(let c=0;c<i.length;c+=1)z(e[c]);r=!0}},o(a){for(let c=0;c<e.length;c+=1)V(e[c]);r=!1},d(a){a&&F(o);for(let c=0;c<e.length;c+=1)e[c].d(a)}}}function ys(t,e){let n,o,r;return o=new wo({props:{item:e[14]}}),{key:t,first:null,c(){n=kt(),ce(o.$$.fragment),this.first=n},m(i,l){D(i,n,l),ie(o,i,l),r=!0},p(i,l){e=i;let a={};l&1&&(a.item=e[14]),o.$set(a)},i(i){r||(z(o.$$.fragment,i),r=!0)},o(i){V(o.$$.fragment,i),r=!1},d(i){i&&F(n),se(o,i)}}}function Yl(t){let e,n,o,r,i=t[0].length&&vs(t);return{c(){e=A("main"),i&&i.c(),h(e,"class","bookmarks"),Ee(e,"is-sorting",t[2]),Ee(e,"no-labels",!t[1].showLabels)},m(l,a){D(l,e,a),i&&i.m(e,null),n=!0,o||(r=q(Xl,"popstate",t[3]),o=!0)},p(l,[a]){l[0].length?i?(i.p(l,a),a&1&&z(i,1)):(i=vs(l),i.c(),z(i,1),i.m(e,null)):i&&(ot(),V(i,1,1,()=>{i=null}),rt()),(!n||a&4)&&Ee(e,"is-sorting",l[2]),(!n||a&2)&&Ee(e,"no-labels",!l[1].showLabels)},i(l){n||(z(i),n=!0)},o(l){V(i),n=!1},d(l){l&&F(e),i&&i.d(),o=!1,r()}}}function Vl(t){t.target.closest(".modal")||t.target.closest(".settings-pane")||document.body.focus()}function Kl(t,e,n){let o,r,i,l,a,c;ee(t,yo,k=>n(5,o=k)),ee(t,Jn,k=>n(6,r=k)),ee(t,nn,k=>n(0,i=k)),ee(t,te,k=>n(1,l=k)),ee(t,ft,k=>n(7,a=k)),ee(t,Ht,k=>n(2,c=k));let f;Pe(()=>{new ks.default(document.querySelector(".bookmarks"),{group:"bookmarks",animation:200,ghostClass:"sortable-ghost",onStart:k=>{st(Ht,c=!0,c),k.item.classList.add("sortable-plate")},onEnd:k=>{k.item.classList.remove("sortable-plate"),st(Ht,c=!1,c)},onSort:E}),G.on(G.settings.loaded,p),G.on(G.bookmark.added,m),G.on(G.bookmark.removed,m),G.on(G.document.clicked,Vl)});function p(){st(ft,a=history.state&&history.state.id||l.rootFolder,a),te.subscribe(y),ft.subscribe(T)}function m(){C(a)}function y(k){k&&(zi(k,f)||(f=qo(k),document.documentElement.style.setProperty("--grid-max-width",k.gridMaxWidth+"px"),document.documentElement.style.setProperty("--icon-width",k.iconWidth+"px"),document.documentElement.style.setProperty("--icon-height",k.iconHeight+"px"),document.documentElement.style.setProperty("--grid-gap",k.gridGap+"px"),document.documentElement.style.setProperty("--color-text",k.pageColor),document.documentElement.style.setProperty("--color-background",k.pageBg),document.documentElement.style.setProperty("--animation-speed",k.animSpeed+"ms"),Tr(k.themeCSS,"ThemeCSS"),Tr(k.css)))}function E(k){k.item.closest(".bookmarks")&&Uo(k.item.dataset.id,{index:k.newIndex,parentId:a})}function x(k){k.state&&st(ft,a=k.state.id,a)}function T(k){if(st(Jn,r=!1,r),!history.state||!history.state.id||history.state.id!==k){let I=k===l.rootFolder?"replaceState":"pushState";window.history[I]({id:k},document.title,"")}C(k)}function C(k){Wo(k).then((I=[])=>{st(nn,i=I,i),st(Jn,r=!0,r),setTimeout(()=>st(yo,o=!1,o),300)})}return[i,l,c,x]}var Wr=class extends fe{constructor(e){super(),pe(this,e,Kl,Yl,de,{})}},Gr=Wr;var As=cr(Hr());function ws(t,e,n){let o=t.slice();return o[18]=e[n],o}function xs(t,e){let n,o,r;return o=new wo({props:{item:e[18]}}),{key:t,first:null,c(){n=kt(),ce(o.$$.fragment),this.first=n},m(i,l){D(i,n,l),ie(o,i,l),r=!0},p(i,l){e=i;let a={};l&8&&(a.item=e[18]),o.$set(a)},i(i){r||(z(o.$$.fragment,i),r=!0)},o(i){V(o.$$.fragment,i),r=!1},d(i){i&&F(n),se(o,i)}}}function Zl(t){let e,n,o,r,i,l,a,c=t[0].title+"",f,p,m,y,E=[],x=new Map,T,C,k,I,R,S=$e(t[3]),g=M=>M[18].id;for(let M=0;M<S.length;M+=1){let v=ws(t,S,M),B=g(v);x.set(B,E[M]=xs(B,v))}return{c(){e=A("div"),n=A("h2"),o=A("button"),l=L(),a=A("button"),f=ye(c),m=L(),y=A("div");for(let M=0;M<E.length;M+=1)E[M].c();h(o,"class","folder-pin"),h(o,"aria-hidden",r=t[4]?null:!0),h(o,"title",i=t[0].pinned?"Unpin":"Pin"),h(a,"class","folder-title"),h(a,"title",p=t[4]?"Close":"Open"),h(n,"class","folder-header"),h(y,"class","folder-items"),h(e,"class",T="folder folder-"+t[0].id),h(e,"data-id",C=t[0].id),Ee(e,"folder-expanded",t[4]),Ee(e,"folder-pinned",t[0].pinned)},m(M,v){D(M,e,v),w(e,n),w(n,o),w(n,l),w(n,a),w(a,f),w(e,m),w(e,y);for(let B=0;B<E.length;B+=1)E[B]&&E[B].m(y,null);t[7](y),t[8](e),k=!0,I||(R=[q(o,"click",t[5]),q(a,"click",t[6])],I=!0)},p(M,[v]){(!k||v&16&&r!==(r=M[4]?null:!0))&&h(o,"aria-hidden",r),(!k||v&1&&i!==(i=M[0].pinned?"Unpin":"Pin"))&&h(o,"title",i),(!k||v&1)&&c!==(c=M[0].title+"")&&Me(f,c),(!k||v&16&&p!==(p=M[4]?"Close":"Open"))&&h(a,"title",p),v&8&&(S=$e(M[3]),ot(),E=hn(E,v,g,1,M,S,x,y,zn,xs,null,ws),rt()),(!k||v&1&&T!==(T="folder folder-"+M[0].id))&&h(e,"class",T),(!k||v&1&&C!==(C=M[0].id))&&h(e,"data-id",C),(!k||v&17)&&Ee(e,"folder-expanded",M[4]),(!k||v&1)&&Ee(e,"folder-pinned",M[0].pinned)},i(M){if(!k){for(let v=0;v<S.length;v+=1)z(E[v]);k=!0}},o(M){for(let v=0;v<E.length;v+=1)V(E[v]);k=!1},d(M){M&&F(e);for(let v=0;v<E.length;v+=1)E[v].d();t[7](null),t[8](null),I=!1,ae(R)}}}function Jl(t,e,n){let o,r;ee(t,ut,g=>n(9,o=g)),ee(t,Ht,g=>n(10,r=g));let{folder:i}=e,l,a,c=[],f=!1;Pe(()=>{new As.default(a,{group:{name:"bookmarks",put:(g,M,v)=>!v.classList.contains("item-folder")},animation:200,emptyInsertThreshold:100,ghostClass:"sortable-ghost",onStart:g=>{st(Ht,r=!0,r),g.item.classList.add("sortable-plate")},onEnd:g=>{g.item.classList.remove("sortable-plate"),st(Ht,r=!1,r)},onSort:E,onAdd:C,onRemove:C,onMove:C,onChange:C}),G.on(G.document.clicked,p),G.on(G.bookmark.added,y),G.on(G.bookmark.removed,y),G.on(G.dockedFolders.changed,m),i.id&&m(i.id)});function p(g){g.target.closest(`.folder-${i.id}`)||i.pinned||k()}function m(g){g!==i.id&&i.title||Ho(i.id).then(M=>{i.title!==M&&(n(0,i.title=M,i),vo(o)),g===i.id&&I(),setTimeout(()=>i.pinned?C():k(),100),setTimeout(()=>i.pinned?C():k(),300),setTimeout(()=>i.pinned?C():k(),500)})}function y(g){g.parentId===i.id&&I().then(kr).then(()=>{C(),setTimeout(C,300)})}function E(g){g.item.closest(".folder-items")&&Uo(g.item.dataset.id,{parentId:i.id,index:g.newIndex})}function x(){n(0,i.pinned=!i.pinned,i),vo(o)}function T(){f?k():C()}function C(){if(!l)return;a.classList.remove("hidden");let g=l.getBoundingClientRect().height;n(1,l.style.marginTop=-g+"px",l),n(4,f=!0)}function k(){l&&(n(1,l.style.marginTop="-41px",l),a.classList.add("hidden"),n(4,f=!1))}function I(g=i.id){return Wo(g).then(M=>{if(!(!M||!M.length))return n(3,c=M.filter(v=>v.type!=="folder")),c})}function R(g){be[g?"unshift":"push"](()=>{a=g,n(2,a)})}function S(g){be[g?"unshift":"push"](()=>{l=g,n(1,l)})}return t.$$set=g=>{"folder"in g&&n(0,i=g.folder)},[i,l,a,c,f,x,T,R,S]}var Ur=class extends fe{constructor(e){super(),pe(this,e,Jl,Zl,de,{folder:0})}},Es=Ur;function Cs(t,e,n){let o=t.slice();return o[4]=e[n],o}function Ss(t){let e,n;return e=new Es({props:{folder:t[4]}}),{c(){ce(e.$$.fragment)},m(o,r){ie(e,o,r),n=!0},p(o,r){let i={};r&1&&(i.folder=o[4]),e.$set(i)},i(o){n||(z(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){se(e,o)}}}function $s(t){let e,n,o=t[4].id&&Ss(t);return{c(){o&&o.c(),e=kt()},m(r,i){o&&o.m(r,i),D(r,e,i),n=!0},p(r,i){r[4].id?o?(o.p(r,i),i&1&&z(o,1)):(o=Ss(r),o.c(),z(o,1),o.m(e.parentNode,e)):o&&(ot(),V(o,1,1,()=>{o=null}),rt())},i(r){n||(z(o),n=!0)},o(r){V(o),n=!1},d(r){r&&F(e),o&&o.d(r)}}}function Ql(t){let e,n,o=$e(t[0]),r=[];for(let l=0;l<o.length;l+=1)r[l]=$s(Cs(t,o,l));let i=l=>V(r[l],1,1,()=>{r[l]=null});return{c(){e=A("div");for(let l=0;l<r.length;l+=1)r[l].c();h(e,"class","folders")},m(l,a){D(l,e,a);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);n=!0},p(l,[a]){if(a&1){o=$e(l[0]);let c;for(c=0;c<o.length;c+=1){let f=Cs(l,o,c);r[c]?(r[c].p(f,a),z(r[c],1)):(r[c]=$s(f),r[c].c(),z(r[c],1),r[c].m(e,null))}for(ot(),c=o.length;c<r.length;c+=1)i(c);rt()}},i(l){if(!n){for(let a=0;a<o.length;a+=1)z(r[a]);n=!0}},o(l){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)V(r[a]);n=!1},d(l){l&&F(e),Mt(r,l)}}}function ea(t,e,n){let o;ee(t,ut,a=>n(0,o=a));let r=!1,i=!1;Pe(()=>{G.on(G.dockedFolders.loaded,()=>{r=!0,l()}),G.on(G.settings.loaded,()=>{i=!0,l()}),G.on(G.settings.imported,()=>{r=!0,i=!0,l()})});function l(){if(!(!r||!i)&&o.length){let a=o.map(async c=>{let f;try{f=await Go(c.id)}catch{}return c.exists=!!f,c});Promise.all(a).then(c=>{a=c.filter(f=>f.exists),ut.set(a)})}}return[o]}var zr=class extends fe{constructor(e){super(),pe(this,e,ea,Ql,de,{})}},Xr=zr;var Jo=ct({});function Tn(t,e="info",n=5e3,o,r=()=>{}){let i=ta(),l=!1;typeof n=="number"&&(setTimeout(()=>gn(i),n),l=!0,n=n-500);let a=e==="alert"||e==="error"?"assertive":"polite";return Jo.update(c=>(c[i]={type:e,msg:t,id:i,ariaLive:a,timeout:n,cb:r,showProgress:l,btn:o},c)),i}function gn(t){Jo.update(e=>(delete e[t],e))}function ta(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}function Ts(t,e,n){let o=t.slice();return o[8]=e[n],o}function Fs(t){let e,n=t[8].btn+"",o;return{c(){e=A("button"),o=ye(n)},m(r,i){D(r,e,i),w(e,o)},p(r,i){i&2&&n!==(n=r[8].btn+"")&&Me(o,n)},d(r){r&&F(e)}}}function Ds(t){let e,n;return{c(){e=A("div"),n=A("div"),h(n,"class","toast-progress"),Cn(n,"width",t[2][t[8].id]+"%"),h(e,"class","toast-progressbar")},m(o,r){D(o,e,r),w(e,n)},p(o,r){r&6&&Cn(n,"width",o[2][o[8].id]+"%")},d(o){o&&F(e)}}}function Ms(t,e){let n,o,r=e[8].msg+"",i,l,a,c,f,p,m,y,E,x,T,C,k=e[8].btn&&Fs(e);function I(){return e[4](e[8])}let R=e[8].showProgress&&Ds(e);function S(...g){return e[5](e[8],...g)}return{key:t,first:null,c(){n=A("div"),o=A("div"),i=ye(r),l=L(),k&&k.c(),a=L(),c=A("button"),c.textContent="\xD7",f=L(),R&&R.c(),p=L(),h(o,"class","toast-msg"),h(c,"class","toast-close"),h(n,"aria-live",m=e[8].ariaLive),h(n,"role","status"),h(n,"class",y="toast toast-"+e[8].type),this.first=n},m(g,M){D(g,n,M),w(n,o),w(o,i),w(n,l),k&&k.m(n,null),w(n,a),w(n,c),w(n,f),R&&R.m(n,null),w(n,p),x=!0,T||(C=[q(c,"click",wt(I)),q(n,"click",nt(S))],T=!0)},p(g,M){e=g,(!x||M&2)&&r!==(r=e[8].msg+"")&&Me(i,r),e[8].btn?k?k.p(e,M):(k=Fs(e),k.c(),k.m(n,a)):k&&(k.d(1),k=null),e[8].showProgress?R?R.p(e,M):(R=Ds(e),R.c(),R.m(n,p)):R&&(R.d(1),R=null),(!x||M&2&&m!==(m=e[8].ariaLive))&&h(n,"aria-live",m),(!x||M&2&&y!==(y="toast toast-"+e[8].type))&&h(n,"class",y)},i(g){x||(g&&He(()=>{x&&(E||(E=tn(n,Br,{start:.5,duration:e[3].animSpeed},!0)),E.run(1))}),x=!0)},o(g){g&&(E||(E=tn(n,Br,{start:.5,duration:e[3].animSpeed},!1)),E.run(0)),x=!1},d(g){g&&F(n),k&&k.d(),R&&R.d(),g&&E&&E.end(),T=!1,ae(C)}}}function na(t){let e,n=[],o=new Map,r,i,l=$e(t[1]),a=c=>c[8].id;for(let c=0;c<l.length;c+=1){let f=Ts(t,l,c),p=a(f);o.set(p,n[c]=Ms(p,f))}return{c(){e=A("div");for(let c=0;c<n.length;c+=1)n[c].c();h(e,"class",r="toaster toaster-"+t[0])},m(c,f){D(c,e,f);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(e,null);i=!0},p(c,[f]){f&14&&(l=$e(c[1]),ot(),n=hn(n,f,a,1,c,l,o,e,zn,Ms,null,Ts),rt()),(!i||f&1&&r!==(r="toaster toaster-"+c[0]))&&h(e,"class",r)},i(c){if(!i){for(let f=0;f<l.length;f+=1)z(n[f]);i=!0}},o(c){for(let f=0;f<n.length;f+=1)V(n[f]);i=!1},d(c){c&&F(e);for(let f=0;f<n.length;f+=1)n[f].d()}}}function oa(t,e,n){let o;ee(t,te,m=>n(3,o=m));let{position:r="bottom"}=e,i=[],l={},a={};Jo.subscribe(m=>{n(1,i=Object.values(m)),i.length||(l={},n(2,a={})),i.forEach(y=>{l[y.id]||c(y.id,y.timeout)})});function c(m,y){n(2,a[m]=0,a),l[m]=setInterval(()=>{n(2,a[m]+=1,a),a[m]>=100&&clearInterval(l[m])},y/100)}let f=m=>gn(m.id),p=(m,y)=>m.cb(y,m.id);return t.$$set=m=>{"position"in m&&n(0,r=m.position)},[r,i,a,o,f,p]}var Yr=class extends fe{constructor(e){super(),pe(this,e,oa,na,de,{position:0})}},Vr=Yr;var{window:Os}=En;function ra(t){let e,n,o;return{c(){e=A("li"),e.textContent="Edit",h(e,"class","context-menu-item")},m(r,i){D(r,e,i),n||(o=q(e,"click",t[6]),n=!0)},p:me,d(r){r&&F(e),n=!1,o()}}}function ia(t){let e,n,o,r,i,l,a,c,f,p,m,y,E,x,T,C,k;return{c(){e=A("li"),e.textContent="Open in New Tab",n=L(),o=A("li"),o.textContent="Open in Background Tab",r=L(),i=A("li"),i.textContent="Open in New Window",l=L(),a=A("li"),c=L(),f=A("li"),f.textContent="Copy URL",p=L(),m=A("li"),y=L(),E=A("li"),E.textContent="Edit",x=L(),T=A("li"),T.textContent="Delete",h(e,"class","context-menu-item"),h(o,"class","context-menu-item"),h(i,"class","context-menu-item"),h(a,"class","context-menu-item context-menu-separator"),h(f,"class","context-menu-item"),h(m,"class","context-menu-item context-menu-separator"),h(E,"class","context-menu-item"),h(T,"class","context-menu-item")},m(I,R){D(I,e,R),D(I,n,R),D(I,o,R),D(I,r,R),D(I,i,R),D(I,l,R),D(I,a,R),D(I,c,R),D(I,f,R),D(I,p,R),D(I,m,R),D(I,y,R),D(I,E,R),D(I,x,R),D(I,T,R),C||(k=[q(e,"click",t[10]),q(o,"click",t[11]),q(i,"click",t[4]),q(f,"click",t[5]),q(E,"click",t[6]),q(T,"click",t[7])],C=!0)},p:me,d(I){I&&(F(e),F(n),F(o),F(r),F(i),F(l),F(a),F(c),F(f),F(p),F(m),F(y),F(E),F(x),F(T)),C=!1,ae(k)}}}function sa(t){let e,n,o;function r(a,c){return a[2]?ra:ia}let i=r(t,-1),l=i(t);return{c(){e=A("ul"),l.c(),h(e,"class","context-menu"),Ee(e,"hidden",!t[1])},m(a,c){D(a,e,c),l.m(e,null),t[12](e),n||(o=[q(Os,"click",t[9]),q(Os,"contextmenu",t[8])],n=!0)},p(a,[c]){i===(i=r(a,c))&&l?l.p(a,c):(l.d(1),l=i(a),l&&(l.c(),l.m(e,null))),c&2&&Ee(e,"hidden",!a[1])},i:me,o:me,d(a){a&&F(e),l.d(),t[12](null),n=!1,ae(o)}}}function la(t,e,n){let o,r,i,l=!1,a=!1;function c(g){k(),rs({active:!g,url:r.url})}function f(){k(),is({url:r.url})}function p(){k(),Xi(r.url),Tn("URL copied to the Clipboard.","info",2e3)}function m(){k(),setTimeout(()=>G.fire(G.bookmark.edit,r,i))}function y(){k(),setTimeout(()=>G.fire(G.bookmark.delete,r,i))}function E(g){if(g)n(0,o.style.left=g.pageX+"px",o),n(0,o.style.top=g.pageY+"px",o);else{let{x:M,y:v,width:B,height:W}=o.getBoundingClientRect(),ue=window.innerHeight,H=window.innerWidth,le=10,Q=M,K=v;ue-W-v<le&&(K=ue-W-le),H-B-M<le&&(Q=H-B-le),n(0,o.style.left=Q+"px",o),n(0,o.style.top=K+"px",o)}}function x(g){i=g.target.closest(".item"),i&&(g.stopPropagation(),g.preventDefault(),n(2,a=!1),g.preventDefault(),i.classList.contains("item-folder")&&n(2,a=!0),E(g),Go(i.dataset.id).then(M=>{r=M,C()}))}function T(g){g.button===0&&(g.target.closest(".context-menu")||k())}function C(){n(1,l=!0),setTimeout(E)}function k(){n(1,l=!1)}let I=()=>c(),R=()=>c(!0);function S(g){be[g?"unshift":"push"](()=>{o=g,n(0,o)})}return[o,l,a,c,f,p,m,y,x,T,I,R,S]}var Kr=class extends fe{constructor(e){super(),pe(this,e,la,sa,de,{})}},Zr=Kr;function Is(t){let e,n,o,r=t[5].default,i=Nn(r,t,t[4],null);return{c(){e=A("div"),i&&i.c(),h(e,"class","settings-block-content")},m(l,a){D(l,e,a),i&&i.m(e,null),o=!0},p(l,a){t=l,i&&i.p&&(!o||a&16)&&Pn(i,r,t,t[4],o?Ln(r,t[4],a,null):Bn(t[4]),null)},i(l){o||(z(i,l),l&&He(()=>{o&&(n||(n=tn(e,Pr,{duration:t[2].animSpeed},!0)),n.run(1))}),o=!0)},o(l){V(i,l),l&&(n||(n=tn(e,Pr,{duration:t[2].animSpeed},!1)),n.run(0)),o=!1},d(l){l&&F(e),i&&i.d(l),l&&n&&n.end()}}}function aa(t){let e,n,o,r,i,l,a,c,f,p=!t[0]&&Is(t);return{c(){e=A("div"),n=A("h2"),o=ye(t[1]),r=L(),i=A("div"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>',l=L(),p&&p.c(),h(i,"class","chevron"),h(n,"class","settings-block-header"),h(n,"tabindex","0"),h(e,"class","settings-block"),Ee(e,"collapsed",t[0])},m(m,y){D(m,e,y),w(e,n),w(n,o),w(n,r),w(n,i),w(e,l),p&&p.m(e,null),a=!0,c||(f=[q(n,"keypress",t[3]),q(n,"click",nt(t[3]))],c=!0)},p(m,[y]){(!a||y&2)&&Me(o,m[1]),m[0]?p&&(ot(),V(p,1,1,()=>{p=null}),rt()):p?(p.p(m,y),y&1&&z(p,1)):(p=Is(m),p.c(),z(p,1),p.m(e,null)),(!a||y&1)&&Ee(e,"collapsed",m[0])},i(m){a||(z(p),a=!0)},o(m){V(p),a=!1},d(m){m&&F(e),p&&p.d(),c=!1,ae(f)}}}function ca(t,e,n){let o;ee(t,te,f=>n(2,o=f));let{$$slots:r={},$$scope:i}=e,{title:l=""}=e,{collapsed:a=!1}=e;function c(f){f.type==="keypress"&&f.key!=="Enter"&&f.key!==" "||n(0,a=!a)}return t.$$set=f=>{"title"in f&&n(1,l=f.title),"collapsed"in f&&n(0,a=f.collapsed),"$$scope"in f&&n(4,i=f.$$scope)},[a,l,o,c,i,r]}var Jr=class extends fe{constructor(e){super(),pe(this,e,ca,aa,de,{title:1,collapsed:0})}},$t=Jr;function Ns(t,e,n){let o=t.slice();return o[4]=e[n],o}function Ls(t){let e,n=t[4].title+"",o,r;return{c(){e=A("option"),o=ye(n),e.__value=r=t[4].id,xe(e,e.__value)},m(i,l){D(i,e,l),w(e,o)},p(i,l){l&1&&n!==(n=i[4].title+"")&&Me(o,n),l&1&&r!==(r=i[4].id)&&(e.__value=r,xe(e,e.__value))},d(i){i&&F(e)}}}function ua(t){let e,n,o,r,i,l,a,c=$e(t[0]),f=[];for(let p=0;p<c.length;p+=1)f[p]=Ls(Ns(t,c,p));return{c(){e=A("small"),e.textContent="This is the primary navigable list of bookmarks.",n=L(),o=A("div"),r=A("div"),i=A("select");for(let p=0;p<f.length;p+=1)f[p].c();h(i,"name","rootfolder"),h(i,"aria-label","Main folder"),t[1].rootFolder===void 0&&He(()=>t[3].call(i)),h(r,"class","select-wrap"),h(o,"class","settings-row")},m(p,m){D(p,e,m),D(p,n,m),D(p,o,m),w(o,r),w(r,i);for(let y=0;y<f.length;y+=1)f[y]&&f[y].m(i,null);Qt(i,t[1].rootFolder,!0),l||(a=[q(i,"change",t[2]),q(i,"change",t[3])],l=!0)},p(p,m){if(m&1){c=$e(p[0]);let y;for(y=0;y<c.length;y+=1){let E=Ns(p,c,y);f[y]?f[y].p(E,m):(f[y]=Ls(E),f[y].c(),f[y].m(i,null))}for(;y<f.length;y+=1)f[y].d(1);f.length=c.length}m&3&&Qt(i,p[1].rootFolder)},d(p){p&&(F(e),F(n),F(o)),Mt(f,p),l=!1,ae(a)}}}function fa(t){let e,n;return e=new $t({props:{collapsed:!0,title:"Main folder",$$slots:{default:[ua]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(o,r){ie(e,o,r),n=!0},p(o,[r]){let i={};r&131&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){n||(z(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){se(e,o)}}}function da(t,e,n){let o;ee(t,te,a=>n(1,o=a));let{folders:r=[]}=e;function i(a){ft.set(a.target.value)}function l(){o.rootFolder=jn(this),te.set(o),n(0,r)}return t.$$set=a=>{"folders"in a&&n(0,r=a.folders)},[r,o,i,l]}var Qr=class extends fe{constructor(e){super(),pe(this,e,da,fa,de,{folders:0})}},Ps=Qr;function Bs(t,e,n){let o=t.slice();return o[8]=e[n],o[9]=e,o[10]=n,o}function Rs(t,e,n){let o=t.slice();return o[11]=e[n],o}function js(t){let e,n=t[11].title+"",o,r;return{c(){e=A("option"),o=ye(n),e.__value=r=t[11].id,xe(e,e.__value)},m(i,l){D(i,e,l),w(e,o)},p(i,l){l&1&&n!==(n=i[11].title+"")&&Me(o,n),l&1&&r!==(r=i[11].id)&&(e.__value=r,xe(e,e.__value))},d(i){i&&F(e)}}}function qs(t){let e,n,o,r,i,l,a,c,f=$e(t[0]),p=[];for(let x=0;x<f.length;x+=1)p[x]=js(Rs(t,f,x));function m(){t[5].call(o,t[9],t[10])}function y(){return t[6](t[8])}function E(){return t[7](t[8])}return{c(){e=A("div"),n=A("div"),o=A("select"),r=A("option"),r.textContent="None";for(let x=0;x<p.length;x+=1)p[x].c();i=L(),l=A("button"),l.textContent="\xD7",r.__value="",xe(r,r.__value),h(o,"title","Select a docked folder"),h(o,"aria-label","Docked Folders"),t[8].id===void 0&&He(m),h(n,"class","select-wrap"),h(l,"title","Remove a docked folder"),h(l,"class","btn xbtn"),h(l,"type","button"),h(e,"class","settings-row")},m(x,T){D(x,e,T),w(e,n),w(n,o),w(o,r);for(let C=0;C<p.length;C+=1)p[C]&&p[C].m(o,null);Qt(o,t[8].id,!0),w(e,i),w(e,l),a||(c=[q(o,"change",m),q(o,"change",y),q(l,"click",wt(E))],a=!0)},p(x,T){if(t=x,T&1){f=$e(t[0]);let C;for(C=0;C<f.length;C+=1){let k=Rs(t,f,C);p[C]?p[C].p(k,T):(p[C]=js(k),p[C].c(),p[C].m(o,null))}for(;C<p.length;C+=1)p[C].d(1);p.length=f.length}T&3&&Qt(o,t[8].id)},d(x){x&&F(e),Mt(p,x),a=!1,ae(c)}}}function pa(t){let e,n,o,r,i,l,a,c=$e(t[1]),f=[];for(let p=0;p<c.length;p+=1)f[p]=qs(Bs(t,c,p));return{c(){e=A("small"),e.textContent="These folders will be docked to the bottom.",n=L();for(let p=0;p<f.length;p+=1)f[p].c();o=L(),r=A("div"),i=A("button"),i.textContent="Add Docked Folder",h(i,"class","btn"),h(i,"type","button"),h(r,"class","settings-row")},m(p,m){D(p,e,m),D(p,n,m);for(let y=0;y<f.length;y+=1)f[y]&&f[y].m(p,m);D(p,o,m),D(p,r,m),w(r,i),l||(a=q(i,"click",t[3]),l=!0)},p(p,m){if(m&23){c=$e(p[1]);let y;for(y=0;y<c.length;y+=1){let E=Bs(p,c,y);f[y]?f[y].p(E,m):(f[y]=qs(E),f[y].c(),f[y].m(o.parentNode,o))}for(;y<f.length;y+=1)f[y].d(1);f.length=c.length}},d(p){p&&(F(e),F(n),F(o),F(r)),Mt(f,p),l=!1,a()}}}function ma(t){let e,n;return e=new $t({props:{collapsed:!0,title:"Docked folders",$$slots:{default:[pa]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(o,r){ie(e,o,r),n=!0},p(o,[r]){let i={};r&16387&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){n||(z(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){se(e,o)}}}function ha(t,e,n){let o;ee(t,ut,m=>n(1,o=m));let{folders:r=[]}=e;function i(m){G.fire(G.dockedFolders.changed,m)}function l(){let m=o;m.push({id:"",open:!1}),ut.set(m)}function a(m){let y=o,E=y.findIndex(x=>x.id===m.id);y.splice(E,1),ut.set(y)}function c(m,y){m[y].id=jn(this),ut.set(o),n(0,r)}let f=m=>i(m.id),p=m=>a(m);return t.$$set=m=>{"folders"in m&&n(0,r=m.folders)},[r,o,i,l,a,c,f,p]}var ei=class extends fe{constructor(e){super(),pe(this,e,ha,ma,de,{folders:0})}},Hs=ei;function ga(t){let e,n,o,r,i,l,a,c;return{c(){e=A("div"),n=A("label"),o=A("div"),r=L(),i=A("input"),h(o,"class","toggle-handle"),h(i,"id",t[1]),h(i,"type","checkbox"),h(i,"class","toggle-input"),h(n,"class","toggle-label"),h(e,"class","toggle"),h(e,"disabled",t[2]),h(e,"tabindex",l=t[2]?void 0:0),Ee(e,"checked",t[0])},m(f,p){D(f,e,p),w(e,n),w(n,o),t[10](o),w(n,r),w(n,i),i.checked=t[0],t[12](n),t[13](e),a||(c=[q(i,"change",t[11]),q(e,"keydown",t[6]),q(e,"touchstart",t[7]),q(e,"mousedown",t[7]),q(e,"contextmenu",nt(t[8])),q(e,"click",nt(t[9]))],a=!0)},p(f,[p]){p&2&&h(i,"id",f[1]),p&1&&(i.checked=f[0]),p&4&&h(e,"disabled",f[2]),p&4&&l!==(l=f[2]?void 0:0)&&h(e,"tabindex",l),p&1&&Ee(e,"checked",f[0])},i:me,o:me,d(f){f&&F(e),t[10](null),t[12](null),t[13](null),a=!1,ae(c)}}}function _a(t,e,n){let o=hr(),r="ontouchstart"in document.documentElement,i=K=>K.type.includes("touch")?K.touches[0].clientX:K.clientX,l=K=>{let U=getComputedStyle(K),ne=parseFloat(U.borderLeftWidth)+parseFloat(U.borderRightWidth);return K.getBoundingClientRect().width-ne},{id:a=void 0}=e,{value:c=!1}=e,{disabled:f=void 0}=e,p,m,y,E,x,T,C=0,k=!1,I=!1;Pe(()=>{x=l(p),T=l(y),R(void 0,!0)});function R(K,U=!1){typeof K<"u"&&n(0,c=K),E=C=c?x:T,n(4,m.style.width=`${C}px`,m),U||o("change",c)}function S(K){(K.key==="Enter"||K.key===" ")&&(K.preventDefault(),R(!c))}function g(K){r&&K.type!=="touchstart"||(K.type==="touchstart"?(document.addEventListener("touchend",M),document.addEventListener("touchmove",v,{passive:!1})):(document.addEventListener("mouseup",M),document.addEventListener("mousemove",v,{passive:!1})),n(4,m.style.transition="none",m),E=i(K)-C,I=!0,k=!0)}function M(){document.removeEventListener("mouseup",M),document.removeEventListener("mousemove",v),document.removeEventListener("touchend",M),document.removeEventListener("touchmove",v),n(4,m.style.transition="",m),I=!1,R(k?!c:C-T>=(x-T)/2)}function v(K){I&&(k=!1,K.preventDefault(),C=i(K)-E,C>x&&(C=x),C<T&&(C=T),n(4,m.style.width=`${C}px`,m))}function B(K){gr.call(this,t,K)}function W(K){gr.call(this,t,K)}function ue(K){be[K?"unshift":"push"](()=>{y=K,n(5,y)})}function H(){c=this.checked,n(0,c)}function le(K){be[K?"unshift":"push"](()=>{m=K,n(4,m)})}function Q(K){be[K?"unshift":"push"](()=>{p=K,n(3,p)})}return t.$$set=K=>{"id"in K&&n(1,a=K.id),"value"in K&&n(0,c=K.value),"disabled"in K&&n(2,f=K.disabled)},[c,a,f,p,m,y,S,g,B,W,ue,H,le,Q]}var ti=class extends fe{constructor(e){super(),pe(this,e,_a,ga,de,{id:1,value:0,disabled:2})}},Fn=ti;function Ws(t,e,n){let o=t.slice();return o[20]=e[n],o}function ba(t){let e;return{c(){e=A("p"),e.innerHTML="To use themes you need to <em>Allow Github</em> in <em>Privacy</em> section below.",h(e,"class","danger")},m(n,o){D(n,e,o)},p:me,d(n){n&&F(e)}}}function va(t){let e,n,o,r,i,l=$e(t[1]),a=[];for(let c=0;c<l.length;c+=1)a[c]=Gs(Ws(t,l,c));return{c(){e=A("div"),n=A("select"),o=A("option"),o.textContent="None";for(let c=0;c<a.length;c+=1)a[c].c();o.__value="",xe(o,o.__value),h(n,"name","theme"),h(n,"aria-labelledby","lbl-theme"),t[0].theme===void 0&&He(()=>t[4].call(n)),h(e,"class","select-wrap")},m(c,f){D(c,e,f),w(e,n),w(n,o);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(n,null);Qt(n,t[0].theme,!0),r||(i=[q(n,"change",t[4]),q(n,"change",t[3])],r=!0)},p(c,f){if(f&2){l=$e(c[1]);let p;for(p=0;p<l.length;p+=1){let m=Ws(c,l,p);a[p]?a[p].p(m,f):(a[p]=Gs(m),a[p].c(),a[p].m(n,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=l.length}f&3&&Qt(n,c[0].theme)},d(c){c&&F(e),Mt(a,c),r=!1,ae(i)}}}function Gs(t){let e,n=t[20]+"",o,r;return{c(){e=A("option"),o=ye(n),e.__value=r=t[20],xe(e,e.__value)},m(i,l){D(i,e,l),w(e,o)},p(i,l){l&2&&n!==(n=i[20]+"")&&Me(o,n),l&2&&r!==(r=i[20])&&(e.__value=r,xe(e,e.__value))},d(i){i&&F(e)}}}function ya(t){let e,n,o,r,i,l,a,c,f,p,m,y,E,x,T,C,k,I,R,S,g,M,v,B,W,ue,H,le,Q,K,U,ne,Ae,lt,it,dt,Qe,Be,Te,Y,J,ge,We,Le,Dn,Oe,X,Se,he,Ce,xt,_n,Ie,Tt,et,tt,at,mt,bn,Je,It,Ye,vn,yn,At,kn,rn,Nt,sn,ht,Ve,Lt,Gt,ln,Pt,an,cn,wn,Bt,Et,Ut,Mn,xo;function eo(P,oe){return P[0].allowGH?va:ba}let xn=eo(t,-1),gt=xn(t);function Ao(P){t[15](P)}let to={id:"showLabels"};t[0].showLabels!==void 0&&(to.value=t[0].showLabels),Ye=new Fn({props:to}),be.push(()=>Xn(Ye,"value",Ao));function zt(P){t[16](P)}let Eo={id:"openLinksInNewTab"};return t[0].openLinksInNewTab!==void 0&&(Eo.value=t[0].openLinksInNewTab),ht=new Fn({props:Eo}),be.push(()=>Xn(ht,"value",zt)),{c(){e=A("h3"),e.textContent="Theme",n=L(),o=A("small"),o.innerHTML='See <a href="https://github.com/perfect-things/perfect-home-themes#perfect-home---themes" target="_blank">more info on Theming</a>.',r=L(),gt.c(),i=L(),l=A("h3"),l.textContent="Basic customizations",a=L(),c=A("div"),f=A("label"),f.textContent="Page title",p=L(),m=A("input"),y=L(),E=A("div"),x=A("label"),x.textContent="Max grid width",T=L(),C=A("input"),k=L(),I=A("div"),R=A("label"),R.textContent="Gaps",S=L(),g=A("input"),M=L(),v=A("div"),B=A("label"),B.textContent="Tile size",W=L(),ue=A("div"),H=L(),le=A("input"),Q=L(),K=A("input"),U=L(),ne=A("div"),Ae=A("label"),Ae.textContent="Text color",lt=L(),it=A("div"),dt=L(),Qe=A("input"),Be=L(),Te=A("input"),Y=L(),J=A("div"),ge=A("label"),ge.textContent="Background",We=L(),Le=A("div"),Dn=L(),Oe=A("input"),X=L(),Se=A("input"),he=L(),Ce=A("div"),xt=A("label"),xt.textContent="Animation speed in ms",_n=L(),Ie=A("div"),Tt=L(),et=A("input"),tt=L(),at=A("div"),mt=A("label"),mt.textContent="Show labels",bn=L(),Je=A("div"),It=L(),ce(Ye.$$.fragment),yn=L(),At=A("div"),kn=A("label"),kn.textContent="Open links in new tab",rn=L(),Nt=A("div"),sn=L(),ce(ht.$$.fragment),Lt=L(),Gt=A("h3"),Gt.textContent="Custom CSS",ln=L(),Pt=A("small"),Pt.innerHTML=`This allows you to fully customize the page.
		See <a href="https://github.com/perfect-things/perfect-home/blob/master/customization-tutorial.md" target="_blank">this tutorial</a> for some examples.`,an=L(),cn=A("small"),cn.innerHTML=`The CSS validator used here is very basic, and cannot ensure the 100% correctness.<br/>
		Please, validate your code <a href="https://jigsaw.w3.org/css-validator/#validate_by_input" target="_blank" title="CSS Validator">here</a>.`,wn=L(),Bt=A("div"),Et=A("textarea"),h(e,"id","lbl-theme"),h(f,"for","pageTitle"),h(m,"id","pageTitle"),h(m,"type","text"),h(m,"placeholder","New Tab"),h(c,"class","settings-row"),h(x,"for","gridMaxWidth"),h(C,"class","inp-short"),h(C,"id","gridMaxWidth"),h(C,"type","number"),h(E,"class","settings-row"),h(R,"for","gridGap"),h(g,"class","inp-short"),h(g,"id","gridGap"),h(g,"type","number"),h(I,"class","settings-row"),h(B,"id","lbl-tile-size"),h(B,"for","tile-size"),h(ue,"class","flex-spacer"),h(le,"class","inp-short"),h(le,"aria-labelledby","lbl-tile-size"),h(le,"aria-label","Tile width"),h(le,"type","number"),h(K,"class","inp-short"),h(K,"aria-labelledby","lbl-tile-size"),h(K,"aria-label","Tile height"),h(K,"type","number"),h(v,"class","settings-row"),h(Ae,"for","pageColor"),h(it,"class","flex-spacer"),h(Qe,"class","inp-short"),h(Qe,"aria-label","Select text color"),h(Qe,"type","color"),h(Te,"class","inp-short"),h(Te,"aria-label","Enter text color hex"),h(Te,"id","pageColor"),h(Te,"type","text"),h(ne,"class","settings-row"),h(ge,"for","pageBg"),h(Le,"class","flex-spacer"),h(Oe,"class","inp-short"),h(Oe,"aria-label","Select background color"),h(Oe,"type","color"),h(Se,"class","inp-short"),h(Se,"aria-label","Enter background color hex"),h(Se,"id","pageBg"),h(Se,"type","text"),h(J,"class","settings-row"),h(xt,"for","animSpeed"),h(Ie,"class","flex-spacer"),h(et,"class","inp-short"),h(et,"id","animSpeed"),h(et,"type","number"),h(et,"min","0"),h(Ce,"class","settings-row horizontal-lbl"),h(mt,"for","showLabels"),h(Je,"class","flex-spacer"),h(at,"class","settings-row horizontal-lbl"),h(kn,"for","openLinksInNewTab"),h(Nt,"class","flex-spacer"),h(At,"class","settings-row horizontal-lbl"),h(Et,"aria-label","Custom CSS"),h(Bt,"class","settings-row")},m(P,oe){D(P,e,oe),D(P,n,oe),D(P,o,oe),D(P,r,oe),gt.m(P,oe),D(P,i,oe),D(P,l,oe),D(P,a,oe),D(P,c,oe),w(c,f),w(c,p),w(c,m),xe(m,t[0].pageTitle),D(P,y,oe),D(P,E,oe),w(E,x),w(E,T),w(E,C),xe(C,t[0].gridMaxWidth),D(P,k,oe),D(P,I,oe),w(I,R),w(I,S),w(I,g),xe(g,t[0].gridGap),D(P,M,oe),D(P,v,oe),w(v,B),w(v,W),w(v,ue),w(v,H),w(v,le),xe(le,t[0].iconWidth),w(v,Q),w(v,K),xe(K,t[0].iconHeight),D(P,U,oe),D(P,ne,oe),w(ne,Ae),w(ne,lt),w(ne,it),w(ne,dt),w(ne,Qe),xe(Qe,t[0].pageColor),w(ne,Be),w(ne,Te),xe(Te,t[0].pageColor),D(P,Y,oe),D(P,J,oe),w(J,ge),w(J,We),w(J,Le),w(J,Dn),w(J,Oe),xe(Oe,t[0].pageBg),w(J,X),w(J,Se),xe(Se,t[0].pageBg),D(P,he,oe),D(P,Ce,oe),w(Ce,xt),w(Ce,_n),w(Ce,Ie),w(Ce,Tt),w(Ce,et),xe(et,t[0].animSpeed),D(P,tt,oe),D(P,at,oe),w(at,mt),w(at,bn),w(at,Je),w(at,It),ie(Ye,at,null),D(P,yn,oe),D(P,At,oe),w(At,kn),w(At,rn),w(At,Nt),w(At,sn),ie(ht,At,null),D(P,Lt,oe),D(P,Gt,oe),D(P,ln,oe),D(P,Pt,oe),D(P,an,oe),D(P,cn,oe),D(P,wn,oe),D(P,Bt,oe),w(Bt,Et),xe(Et,t[0].css),Ut=!0,Mn||(xo=[q(m,"input",t[5]),q(C,"input",t[6]),q(g,"input",t[7]),q(le,"input",t[8]),q(K,"input",t[9]),q(Qe,"input",t[10]),q(Te,"input",t[11]),q(Oe,"input",t[12]),q(Se,"input",t[13]),q(et,"input",t[14]),q(Et,"input",t[17]),q(Et,"input",t[2])],Mn=!0)},p(P,oe){xn===(xn=eo(P,oe))&&gt?gt.p(P,oe):(gt.d(1),gt=xn(P),gt&&(gt.c(),gt.m(i.parentNode,i))),oe&3&&m.value!==P[0].pageTitle&&xe(m,P[0].pageTitle),oe&3&&Ot(C.value)!==P[0].gridMaxWidth&&xe(C,P[0].gridMaxWidth),oe&3&&Ot(g.value)!==P[0].gridGap&&xe(g,P[0].gridGap),oe&3&&Ot(le.value)!==P[0].iconWidth&&xe(le,P[0].iconWidth),oe&3&&Ot(K.value)!==P[0].iconHeight&&xe(K,P[0].iconHeight),oe&3&&xe(Qe,P[0].pageColor),oe&3&&Te.value!==P[0].pageColor&&xe(Te,P[0].pageColor),oe&3&&xe(Oe,P[0].pageBg),oe&3&&Se.value!==P[0].pageBg&&xe(Se,P[0].pageBg),oe&3&&Ot(et.value)!==P[0].animSpeed&&xe(et,P[0].animSpeed);let On={};!vn&&oe&1&&(vn=!0,On.value=P[0].showLabels,Un(()=>vn=!1)),Ye.$set(On);let Co={};!Ve&&oe&1&&(Ve=!0,Co.value=P[0].openLinksInNewTab,Un(()=>Ve=!1)),ht.$set(Co),oe&3&&xe(Et,P[0].css)},i(P){Ut||(z(Ye.$$.fragment,P),z(ht.$$.fragment,P),Ut=!0)},o(P){V(Ye.$$.fragment,P),V(ht.$$.fragment,P),Ut=!1},d(P){P&&(F(e),F(n),F(o),F(r),F(i),F(l),F(a),F(c),F(y),F(E),F(k),F(I),F(M),F(v),F(U),F(ne),F(Y),F(J),F(he),F(Ce),F(tt),F(at),F(yn),F(At),F(Lt),F(Gt),F(ln),F(Pt),F(an),F(cn),F(wn),F(Bt)),gt.d(P),se(Ye),se(ht),Mn=!1,ae(xo)}}}function ka(t){let e,n;return e=new $t({props:{collapsed:!0,title:"Customize",$$slots:{default:[ya]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(o,r){ie(e,o,r),n=!0},p(o,[r]){let i={};r&8388611&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){n||(z(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){se(e,o)}}}function wa(t,e,n){let o,r,i;ee(t,Wt,v=>n(18,o=v)),ee(t,te,v=>n(0,r=v)),ee(t,Yo,v=>n(1,i=v)),Pe(()=>{l()});function l(){Object.keys(o).length||Wt.load()}function a(v){let B=v.target,W=B.value||"",ue=Hi(W);B.setCustomValidity(ue?"":"Check your CSS!")}function c(){Wt.apply()}function f(){r.theme=jn(this),te.set(r)}function p(){r.pageTitle=this.value,te.set(r)}function m(){r.gridMaxWidth=Ot(this.value),te.set(r)}function y(){r.gridGap=Ot(this.value),te.set(r)}function E(){r.iconWidth=Ot(this.value),te.set(r)}function x(){r.iconHeight=Ot(this.value),te.set(r)}function T(){r.pageColor=this.value,te.set(r)}function C(){r.pageColor=this.value,te.set(r)}function k(){r.pageBg=this.value,te.set(r)}function I(){r.pageBg=this.value,te.set(r)}function R(){r.animSpeed=Ot(this.value),te.set(r)}function S(v){t.$$.not_equal(r.showLabels,v)&&(r.showLabels=v,te.set(r))}function g(v){t.$$.not_equal(r.openLinksInNewTab,v)&&(r.openLinksInNewTab=v,te.set(r))}function M(){r.css=this.value,te.set(r)}return[r,i,a,c,f,p,m,y,E,x,T,C,k,I,R,S,g,M]}var ni=class extends fe{constructor(e){super(),pe(this,e,wa,ka,de,{})}},Us=ni;function xa(t){let e,n,o,r,i,l,a,c,f,p,m,y,E,x,T,C,k,I;function R(v){t[2](v)}let S={id:"allowGoogle"};t[0].allowGoogle!==void 0&&(S.value=t[0].allowGoogle),c=new Fn({props:S}),be.push(()=>Xn(c,"value",R)),c.$on("change",t[1]);function g(v){t[3](v)}let M={id:"allowGH"};return t[0].allowGH!==void 0&&(M.value=t[0].allowGH),C=new Fn({props:M}),be.push(()=>Xn(C,"value",g)),C.$on("change",t[1]),{c(){e=A("small"),e.innerHTML=`This allows you to restrict the extension to not query external servers.
		See <a href="https://github.com/perfect-things/perfect-home#privacy" target="_blank">more info on the privacy settings</a>.

		<ul><li><b>Google</b> is used to fetch favicons that show up in docked folders and search
			</li><li><b>Github</b> is used to fetch themes &amp; theme icons</li></ul>`,n=L(),o=A("div"),r=A("label"),r.textContent="Allow Google",i=L(),l=A("div"),a=L(),ce(c.$$.fragment),p=L(),m=A("div"),y=A("label"),y.textContent="Allow Github",E=L(),x=A("div"),T=L(),ce(C.$$.fragment),h(r,"for","allowGoogle"),h(l,"class","flex-spacer"),h(o,"class","settings-row horizontal-lbl"),h(y,"for","allowGH"),h(x,"class","flex-spacer"),h(m,"class","settings-row horizontal-lbl")},m(v,B){D(v,e,B),D(v,n,B),D(v,o,B),w(o,r),w(o,i),w(o,l),w(o,a),ie(c,o,null),D(v,p,B),D(v,m,B),w(m,y),w(m,E),w(m,x),w(m,T),ie(C,m,null),I=!0},p(v,B){let W={};!f&&B&1&&(f=!0,W.value=v[0].allowGoogle,Un(()=>f=!1)),c.$set(W);let ue={};!k&&B&1&&(k=!0,ue.value=v[0].allowGH,Un(()=>k=!1)),C.$set(ue)},i(v){I||(z(c.$$.fragment,v),z(C.$$.fragment,v),I=!0)},o(v){V(c.$$.fragment,v),V(C.$$.fragment,v),I=!1},d(v){v&&(F(e),F(n),F(o),F(p),F(m)),se(c),se(C)}}}function Aa(t){let e,n;return e=new $t({props:{collapsed:!0,title:"Privacy",$$slots:{default:[xa]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(o,r){ie(e,o,r),n=!0},p(o,[r]){let i={};r&17&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){n||(z(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){se(e,o)}}}var zs=3e3;function Ea(t,e,n){let o;ee(t,te,a=>n(0,o=a));function r(){let a=setTimeout(()=>location.reload(),zs);Tn("Reloading page...","info",zs,"Stop",(c,f)=>{c.target.closest("button")&&(clearTimeout(a),gn(f))})}function i(a){t.$$.not_equal(o.allowGoogle,a)&&(o.allowGoogle=a,te.set(o))}function l(a){t.$$.not_equal(o.allowGH,a)&&(o.allowGH=a,te.set(o))}return[o,r,i,l]}var oi=class extends fe{constructor(e){super(),pe(this,e,Ea,Aa,de,{})}},Xs=oi;function Ca(t){let e,n,o,r,i,l,a,c,f,p;return{c(){e=A("small"),e.textContent="You can Export settings with thumbnails to a json file to backup your configuration. That file can then be imported in the same version of this Firefox extension.",n=L(),o=A("div"),r=A("a"),r.textContent="Export",i=L(),l=A("div"),a=ye(`Import
				`),c=A("input"),h(r,"href","#export"),h(r,"class","btn btn-export"),h(r,"tabindex","0"),h(r,"download","perfect-home-settings.json"),h(c,"type","file"),h(c,"accept","application/json"),h(c,"tabindex","-1"),h(l,"class","btn btn-import"),h(l,"tabindex","0"),h(o,"class","settings-row")},m(m,y){D(m,e,y),D(m,n,y),D(m,o,y),w(o,r),w(o,i),w(o,l),w(l,a),w(l,c),t[4](c),f||(p=[q(r,"click",t[1]),q(c,"change",t[2]),q(l,"keypress",t[3]),q(l,"click",t[3])],f=!0)},p:me,d(m){m&&(F(e),F(n),F(o)),t[4](null),f=!1,ae(p)}}}function Sa(t){let e,n;return e=new $t({props:{collapsed:!0,title:"Import/Export",$$slots:{default:[Ca]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(o,r){ie(e,o,r),n=!0},p(o,[r]){let i={};r&257&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){n||(z(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){se(e,o)}}}function $a(t,e,n){let o,r,i;ee(t,qt,m=>n(5,o=m)),ee(t,ut,m=>n(6,r=m)),ee(t,te,m=>n(7,i=m));let l;function a(m){let y=JSON.stringify({options:i,dockedFolders:r,thumbs:o});m.target.href="data:application/json;charset=utf-8,"+encodeURIComponent(y)}function c(m){let y=new FileReader;y.onload=E=>{let x;try{x=JSON.parse(E.target.result)}catch{}x?(x.thumbs&&qt.set(x.thumbs),x.dockedFolder&&ut.set(x.dockedFolder),x.options&&te.set(x.options),G.fire(G.settings.imported)):alert("Incorrect settings file!")},y.readAsText(m.target.files[0])}function f(m){(m.key==="Enter"||m.key===" "||m.type==="click")&&l.click()}function p(m){be[m?"unshift":"push"](()=>{l=m,n(0,l)})}return[l,a,c,f,p]}var ri=class extends fe{constructor(e){super(),pe(this,e,$a,Sa,de,{})}},Ys=ri;function Ta(t){let e,n,o,r,i,l,a,c,f,p,m;return{c(){e=A("small"),e.textContent="This will reset the customization settings to their default values. It will not change the thumbnails cache.",n=L(),o=A("div"),r=A("button"),r.textContent="Reset to defaults",i=L(),l=A("small"),l.textContent="This will clear all stored items: options and thumbnails cache.",a=L(),c=A("div"),f=A("button"),f.textContent="Clear cache",h(r,"type","button"),h(r,"class","btn btn-reset"),h(o,"class","settings-row"),h(f,"type","button"),h(f,"class","btn btn-clear danger"),h(c,"class","settings-row")},m(y,E){D(y,e,E),D(y,n,E),D(y,o,E),w(o,r),D(y,i,E),D(y,l,E),D(y,a,E),D(y,c,E),w(c,f),p||(m=[q(r,"click",t[0]),q(f,"click",t[1])],p=!0)},p:me,d(y){y&&(F(e),F(n),F(o),F(i),F(l),F(a),F(c)),p=!1,ae(m)}}}function Fa(t){let e,n;return e=new $t({props:{collapsed:!0,title:"Reset",$$slots:{default:[Ta]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},m(o,r){ie(e,o,r),n=!0},p(o,[r]){let i={};r&8&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){n||(z(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){se(e,o)}}}function Da(t,e,n){let o;ee(t,Ko,l=>n(2,o=l));function r(){te.set(o)}function i(){window.confirm(`Are you sure you wish to purge all cache?
(Make sure you backed up your settings)`)&&ns().then(()=>location.reload())}return[r,i]}var ii=class extends fe{constructor(e){super(),pe(this,e,Da,Fa,de,{})}},Vs=ii;function Ks(t){let e,n,o,r,i,l,a,c,f,p,m,y,E,x,T,C,k,I,R,S,g;return i=new Ps({props:{folders:t[0]}}),a=new Hs({props:{folders:t[0]}}),f=new Us({}),m=new Xs({}),E=new Ys({}),T=new Vs({}),{c(){e=A("div"),n=A("h1"),n.textContent="Settings",o=L(),r=A("div"),ce(i.$$.fragment),l=L(),ce(a.$$.fragment),c=L(),ce(f.$$.fragment),p=L(),ce(m.$$.fragment),y=L(),ce(E.$$.fragment),x=L(),ce(T.$$.fragment),C=L(),k=A("div"),h(r,"class","settings-form"),h(k,"tabindex","0"),h(e,"class","settings-pane"),h(e,"tabindex","-1")},m(M,v){D(M,e,v),w(e,n),w(e,o),w(e,r),ie(i,r,null),w(r,l),ie(a,r,null),w(r,c),ie(f,r,null),w(r,p),ie(m,r,null),w(r,y),ie(E,r,null),w(r,x),ie(T,r,null),w(e,C),w(e,k),t[10](k),R=!0,S||(g=q(k,"keydown",t[9]),S=!0)},p(M,v){t=M;let B={};v&1&&(B.folders=t[0]),i.$set(B);let W={};v&1&&(W.folders=t[0]),a.$set(W)},i(M){R||(z(i.$$.fragment,M),z(a.$$.fragment,M),z(f.$$.fragment,M),z(m.$$.fragment,M),z(E.$$.fragment,M),z(T.$$.fragment,M),M&&He(()=>{R&&(I||(I=tn(e,Lr,{x:310,duration:t[4].animSpeed},!0)),I.run(1))}),R=!0)},o(M){V(i.$$.fragment,M),V(a.$$.fragment,M),V(f.$$.fragment,M),V(m.$$.fragment,M),V(E.$$.fragment,M),V(T.$$.fragment,M),M&&(I||(I=tn(e,Lr,{x:310,duration:t[4].animSpeed},!1)),I.run(0)),R=!1},d(M){M&&F(e),se(i),se(a),se(f),se(m),se(E),se(T),t[10](null),M&&I&&I.end(),S=!1,g()}}}function Ma(t){let e,n,o,r,i,l,a,c;document.title=e=t[4].pageTitle;let f=t[1]&&Ks(t);return{c(){n=L(),o=A("button"),o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -256 1792 1792" aria-label="Cog"><g transform="matrix(1,0,0,-1,121.49153,1285.4237)"><path aria-label="Cog" d="m 1024,640 q 0,106 -75,181 -75,75 -181,75 -106,0 -181,-75 -75,-75 -75,-181 0,-106 75,-181 75,-75 181,-75 106,0 181,75 75,75 75,181 z m 512,109 V 527 q 0,-12 -8,-23 -8,-11 -20,-13 l -185,-28 q -19,-54 -39,-91 35,-50 107,-138 10,-12 10,-25 0,-13 -9,-23 -27,-37 -99,-108 -72,-71 -94,-71 -12,0 -26,9 l -138,108 q -44,-23 -91,-38 -16,-136 -29,-186 -7,-28 -36,-28 H 657 q -14,0 -24.5,8.5 Q 622,-111 621,-98 L 593,86 q -49,16 -90,37 L 362,16 Q 352,7 337,7 323,7 312,18 186,132 147,186 q -7,10 -7,23 0,12 8,23 15,21 51,66.5 36,45.5 54,70.5 -27,50 -41,99 L 29,495 Q 16,497 8,507.5 0,518 0,531 v 222 q 0,12 8,23 8,11 19,13 l 186,28 q 14,46 39,92 -40,57 -107,138 -10,12 -10,24 0,10 9,23 26,36 98.5,107.5 72.5,71.5 94.5,71.5 13,0 26,-10 l 138,-107 q 44,23 91,38 16,136 29,186 7,28 36,28 h 222 q 14,0 24.5,-8.5 Q 914,1391 915,1378 l 28,-184 q 49,-16 90,-37 l 142,107 q 9,9 24,9 13,0 25,-10 129,-119 165,-170 7,-8 7,-22 0,-12 -8,-23 -15,-21 -51,-66.5 -36,-45.5 -54,-70.5 26,-50 41,-98 l 183,-28 q 13,-2 21,-12.5 8,-10.5 8,-23.5 z" style="fill:currentColor"></path></g></svg>',r=L(),f&&f.c(),i=kt(),h(o,"title","Settings"),h(o,"class","icon-btn btn-settings"),Ee(o,"hidden",!t[1])},m(p,m){D(p,n,m),D(p,o,m),t[7](o),D(p,r,m),f&&f.m(p,m),D(p,i,m),l=!0,a||(c=[q(o,"keydown",t[8]),q(o,"click",t[5])],a=!0)},p(p,[m]){(!l||m&16)&&e!==(e=p[4].pageTitle)&&(document.title=e),(!l||m&2)&&Ee(o,"hidden",!p[1]),p[1]?f?(f.p(p,m),m&2&&z(f,1)):(f=Ks(p),f.c(),z(f,1),f.m(i.parentNode,i)):f&&(ot(),V(f,1,1,()=>{f=null}),rt())},i(p){l||(z(f),l=!0)},o(p){V(f),l=!1},d(p){p&&(F(n),F(o),F(r),F(i)),t[7](null),f&&f.d(p),a=!1,ae(c)}}}function Oa(t,e,n){let o,r;ee(t,Ko,S=>n(11,o=S)),ee(t,te,S=>n(4,r=S));let i=[],l=!1,a,c;Pe(()=>{Vn().then(f).then(p),G.on(G.document.clicked,x)});function f(S){n(0,i=S.filter(g=>g.type==="folder").sort((g,M)=>g.title.localeCompare(M.title)))}function p(){Zi().then(S=>{te.set(Object.assign({},o,S)),te.subscribe(Ji),G.fire(G.settings.loaded)})}function m(S){let g=!S.screenX&&!S.screenY;l?E(g):y()}function y(){n(1,l=!0)}function E(S){n(1,l=!1),S&&a.focus()}function x(S){S.target.closest(".settings-pane,.btn-settings")||l&&E()}function T(S,g){!l||S.key!=="Tab"||(g==="first"&&S.shiftKey?(S.preventDefault(),c.focus()):g==="last"&&!S.shiftKey&&(S.preventDefault(),a.focus()))}function C(S){be[S?"unshift":"push"](()=>{a=S,n(2,a)})}let k=S=>T(S,"first"),I=S=>T(S,"last");function R(S){be[S?"unshift":"push"](()=>{c=S,n(3,c)})}return[i,l,a,c,r,m,T,C,k,I,R]}var si=class extends fe{constructor(e){super(),pe(this,e,Oa,Ma,de,{})}},li=si;function Ia(t){let e,n,o,r,i,l,a,c,f,p,m,y,E,x,T=t[11].default,C=Nn(T,t,t[10],null);return{c(){e=A("div"),n=A("div"),o=A("h1"),r=ye(t[1]),i=L(),l=A("div"),a=A("div"),c=L(),C&&C.c(),f=L(),p=A("div"),h(a,"tabindex","0"),h(a,"class","focus-trap focus-trap-top"),h(p,"tabindex","0"),h(p,"class","focus-trap focus-trap-bottom"),h(l,"class","modal-content"),h(n,"class","modal"),h(e,"class",m="modal-backdrop "+t[2]),Ee(e,"visible",t[0])},m(k,I){D(k,e,I),w(e,n),w(n,o),w(o,r),w(n,i),w(n,l),w(l,a),w(l,c),C&&C.m(l,null),w(l,f),w(l,p),t[12](l),t[13](e),y=!0,E||(x=[q(a,"focus",t[6]),q(p,"focus",t[5]),q(e,"click",t[7])],E=!0)},p(k,[I]){(!y||I&2)&&Me(r,k[1]),C&&C.p&&(!y||I&1024)&&Pn(C,T,k,k[10],y?Ln(T,k[10],I,null):Bn(k[10]),null),(!y||I&4&&m!==(m="modal-backdrop "+k[2]))&&h(e,"class",m),(!y||I&5)&&Ee(e,"visible",k[0])},i(k){y||(z(C,k),y=!0)},o(k){V(C,k),y=!1},d(k){k&&F(e),C&&C.d(k),t[12](null),t[13](null),E=!1,ae(x)}}}function Na(t,e,n){let o;ee(t,te,g=>n(15,o=g));let{$$slots:r={},$$scope:i}=e,{title:l=""}=e,{opened:a=!1}=e,{cssClass:c=""}=e,f,p,m;function y(){let g=x().shift();g&&g.focus()}function E(){let g=x().pop();g&&g.focus()}function x(){return Array.from(p.querySelectorAll("a[href],button:not([disabled]),iframe:not([disabled]),input:not([disabled]),select:not([disabled]),textarea:not([disabled]),[contentEditable]"))}function T(g){g.target.closest(".modal")||(g.stopPropagation(),I())}function C(g){let M=document.activeElement.closest(".modal-backdrop")===f;g.key==="Escape"&&a&&M&&(g.stopPropagation(),I())}function k(g){a||(m=g||document.activeElement,n(3,f.style.display="flex",f),setTimeout(()=>{n(0,a=!0),y(),document.addEventListener("keydown",C,!0)},100))}function I(){a&&(setTimeout(()=>n(0,a=!1)),setTimeout(()=>{n(3,f.style.display="none",f),m&&m.focus(),document.removeEventListener("keydown",C)},o.animSpeed))}function R(g){be[g?"unshift":"push"](()=>{p=g,n(4,p)})}function S(g){be[g?"unshift":"push"](()=>{f=g,n(3,f)})}return t.$$set=g=>{"title"in g&&n(1,l=g.title),"opened"in g&&n(0,a=g.opened),"cssClass"in g&&n(2,c=g.cssClass),"$$scope"in g&&n(10,i=g.$$scope)},[a,l,c,f,p,y,E,T,k,I,i,r,R,S]}var ai=class extends fe{constructor(e){super(),pe(this,e,Na,Ia,de,{title:1,opened:0,cssClass:2,open:8,close:9})}get title(){return this.$$.ctx[1]}set title(e){this.$$set({title:e}),mn()}get opened(){return this.$$.ctx[0]}set opened(e){this.$$set({opened:e}),mn()}get cssClass(){return this.$$.ctx[2]}set cssClass(e){this.$$set({cssClass:e}),mn()}get open(){return this.$$.ctx[8]}get close(){return this.$$.ctx[9]}},on=ai;function Zs(t,e,n){let o=t.slice();return o[28]=e[n],o[30]=n,o}function Js(t,e){let n,o,r,i,l,a,c=(e[28].highlightedTitle||e[28].title)+"",f,p,m=e[28].breadcrumbs+"",y,E,x,T;function C(){return e[11](e[28])}return{key:t,first:null,c(){n=A("div"),o=A("div"),i=L(),l=A("span"),a=new Lo(!1),f=L(),p=A("small"),y=L(),h(o,"class","autocomplete-list-item-icon"),h(o,"style",r=e[28].favicon?`background-image: url(${e[28].favicon})`:""),a.a=f,h(l,"class","autocomplete-list-item-text"),h(n,"class",E="autocomplete-list-item autocomplete-list-item-"+e[28].type),Ee(n,"selected",e[30]===e[1]),this.first=n},m(k,I){D(k,n,I),w(n,o),w(n,i),w(n,l),a.m(c,l),w(l,f),w(l,p),p.innerHTML=m,w(n,y),x||(T=q(n,"click",C),x=!0)},p(k,I){e=k,I[0]&16&&r!==(r=e[28].favicon?`background-image: url(${e[28].favicon})`:"")&&h(o,"style",r),I[0]&16&&c!==(c=(e[28].highlightedTitle||e[28].title)+"")&&a.p(c),I[0]&16&&m!==(m=e[28].breadcrumbs+"")&&(p.innerHTML=m),I[0]&16&&E!==(E="autocomplete-list-item autocomplete-list-item-"+e[28].type)&&h(n,"class",E),I[0]&18&&Ee(n,"selected",e[30]===e[1])},d(k){k&&F(n),x=!1,T()}}}function La(t){let e,n,o,r,i=[],l=new Map,a,c,f=$e(t[4]),p=m=>m[28].id;for(let m=0;m<f.length;m+=1){let y=Zs(t,f,m),E=p(y);l.set(E,i[m]=Js(E,y))}return{c(){e=A("div"),n=A("input"),o=L(),r=A("div");for(let m=0;m<i.length;m+=1)i[m].c();h(n,"type","text"),h(n,"class","autocomplete-input"),h(r,"class","autocomplete-list"),h(e,"class","autocomplete")},m(m,y){D(m,e,y),w(e,n),t[10](n),w(e,o),w(e,r);for(let E=0;E<i.length;E+=1)i[E]&&i[E].m(r,null);t[12](r),a||(c=[q(n,"input",t[7]),q(n,"focus",t[9]),q(n,"keydown",t[6]),q(n,"keypress",t[8])],a=!0)},p(m,y){y[0]&50&&(f=$e(m[4]),i=hn(i,y,p,1,m,f,l,r,Bi,Js,null,Zs))},d(m){m&&F(e),t[10](null);for(let y=0;y<i.length;y+=1)i[y].d();t[12](null),a=!1,ae(c)}}}function Pa(t){let e,n,o={cssClass:"search-modal",$$slots:{default:[La]},$$scope:{ctx:t}};return e=new on({props:o}),t[13](e),{c(){ce(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,i){let l={};i[0]&30|i[1]&1&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){n||(z(e.$$.fragment,r),n=!0)},o(r){V(e.$$.fragment,r),n=!1},d(r){t[13](null),se(e,r)}}}function Qs(t,e){if(!t.parentId)return t.title||"All Bookmarks";let n=[],o=e.find(r=>r.id===t.parentId);return n.push(Qs(o,e),t.title||"-"),n.join(" &raquo; ")}function Ba(t,e,n){let o;ee(t,te,U=>n(16,o=U));let r,i=[],l="",a=0,c,f,p=[];Pe(()=>{W(),v(),document.addEventListener("keydown",E),G.on(G.search.toggle,ue)});function m(){Vn().then(U=>{i=U.filter(ne=>ne.type!=="separator").map(ne=>(ne.breadcrumbs=Qs(ne,U),ne.type==="bookmark"&&(ne.favicon=Qn(ne.url)),ne))}).then(S)}function y(U){U.type==="folder"?ft.set(U.id):U.type==="bookmark"&&(location.href=U.url)}function E(U){U.key==="p"&&U.metaKey&&(U.preventDefault(),ue())}function x(){let U=p[a];l=U.title,W(),y(U)}function T(){a>0&&n(1,a--,a),k()}function C(){a<p.length-1&&n(1,a++,a),k()}function k(){let U=f.querySelector(".selected");U&&U.scrollIntoView({behavior:"smooth",block:"center"})}function I(U){l=U.title,W(),y(U)}function R(U){let ne=U.key;ne==="Tab"&&U.shiftKey&&(ne="ShiftTab");let lt={Tab:r.opened?C.bind(this):null,ShiftTab:r.opened?T.bind(this):null,ArrowDown:C.bind(this),ArrowUp:T.bind(this),Escape:M.bind(this)}[ne];typeof lt=="function"&&(U.preventDefault(),lt(U))}function S(){l=c.value||"",n(1,a=0);let U=l.toLowerCase(),ne=qo(i).filter(Ae=>Ae.type!=="separator");l&&(ne=ne.filter(Ae=>Wi(Ae.title,U)).map(Ae=>(Ae.highlightedTitle=Gi(Ae.title,U),Ae.score=1,Ae.title.toLowerCase().includes(U)&&(Ae.score=2),Ae.title.includes(l)&&(Ae.score=3),Ae.title.toLowerCase()===U&&(Ae.score=4),Ae.title===l&&(Ae.score=5),Ae)),ne=ne.sort((Ae,lt)=>lt.score-Ae.score)),n(4,p=ne)}function g(U){U.key==="Enter"&&(U.preventDefault(),x())}function M(U){if(U.stopPropagation(),l)return v();r.opened&&(c.focus(),W())}function v(){l="",n(2,c.value="",c),S(),setTimeout(()=>c.focus())}function B(){r.open(),i.length||m(),setTimeout(()=>c.select(),100)}function W(){r.close(),setTimeout(v,o.animSpeed)}function ue(){r.opened?W():B()}function H(U){be[U?"unshift":"push"](()=>{c=U,n(2,c)})}let le=U=>I(U);function Q(U){be[U?"unshift":"push"](()=>{f=U,n(3,f)})}function K(U){be[U?"unshift":"push"](()=>{r=U,n(0,r)})}return[r,a,c,f,p,I,R,S,g,B,H,le,Q,K]}var ci=class extends fe{constructor(e){super(),pe(this,e,Ba,Pa,de,{},null,[-1,-1])}},ui=ci;function Ra(t){let e;return{c(){e=ye(t[6])},m(n,o){D(n,e,o)},p(n,o){o[0]&64&&Me(e,n[6])},d(n){n&&F(e)}}}function el(t){let e,n,o,r,i;return{c(){e=A("label"),e.textContent="URL",n=L(),o=A("input"),h(e,"for","url"),h(o,"id","url"),h(o,"type","text")},m(l,a){D(l,e,a),D(l,n,a),D(l,o,a),xe(o,t[0].url),r||(i=q(o,"input",t[20]),r=!0)},p(l,a){a[0]&1&&o.value!==l[0].url&&xe(o,l[0].url)},d(l){l&&(F(e),F(n),F(o)),r=!1,i()}}}function tl(t){let e,n,o;return{c(){e=A("button"),e.textContent="Pick from theme",h(e,"type","button")},m(r,i){D(r,e,i),n||(o=q(e,"click",t[10]),n=!0)},p:me,d(r){r&&F(e),n=!1,o()}}}function ja(t){let e,n,o,r,i,l,a,c,f,p,m,y,E,x,T,C,k,I,R,S,g,M,v,B,W,ue,H,le,Q,K,U,ne,Ae,lt,it,dt,Qe,Be;i=new ko({props:{$$slots:{default:[Ra]},$$scope:{ctx:t}}});let Te=!t[8]&&el(t),Y=t[9].theme&&t[9].allowGH&&tl(t);return{c(){e=A("form"),n=A("div"),o=A("div"),r=A("div"),ce(i.$$.fragment),l=L(),a=A("span"),c=ye(t[7]),f=L(),p=A("div"),m=A("label"),m.textContent="Title",y=L(),E=A("input"),x=L(),Te&&Te.c(),T=L(),C=A("label"),k=ye(`Thumbnail URL
					`),I=A("button"),I.textContent="Clear",R=L(),S=A("button"),S.textContent="Browse",g=L(),M=A("input"),v=L(),Y&&Y.c(),B=L(),W=A("textarea"),H=L(),le=A("div"),Q=A("button"),Q.textContent="Save",K=L(),U=A("button"),U.textContent="Cancel",ne=L(),Ae=A("div"),lt=L(),it=A("button"),it.textContent="Delete",h(a,"class","item-thumb-suffix"),h(r,"class","item-thumb"),h(o,"class","thumb"),h(m,"for","title"),h(E,"id","title"),h(E,"type","text"),h(I,"type","button"),h(S,"type","button"),h(M,"type","file"),h(M,"tabindex","-1"),h(M,"accept","image/png, image/jpeg"),h(C,"for","thumb_url"),h(C,"class","thumbnail-label"),h(W,"id","thumb_url"),W.value=ue=t[5]||"",h(p,"class","details"),h(n,"class","editor-contents"),h(Q,"type","submit"),h(Q,"class","btn success"),h(U,"type","button"),h(U,"class","btn"),h(Ae,"class","flex-spacer"),h(it,"type","button"),h(it,"class","btn danger"),h(le,"class","buttons")},m(J,ge){D(J,e,ge),w(e,n),w(n,o),w(o,r),ie(i,r,null),w(r,l),w(r,a),w(a,c),t[18](r),w(n,f),w(n,p),w(p,m),w(p,y),w(p,E),xe(E,t[0].title),w(p,x),Te&&Te.m(p,null),w(p,T),w(p,C),w(C,k),w(C,I),w(C,R),w(C,S),w(C,g),w(C,M),t[22](M),w(C,v),Y&&Y.m(C,null),w(p,B),w(p,W),t[23](n),w(e,H),w(e,le),w(le,Q),w(le,K),w(le,U),w(le,ne),w(le,Ae),w(le,lt),w(le,it),dt=!0,Qe||(Be=[q(E,"input",t[19]),q(I,"click",t[21]),q(S,"click",t[13]),q(M,"change",t[14]),q(W,"input",t[11]),q(Q,"click",t[17]),q(U,"click",t[16]),q(it,"click",t[24]),q(e,"submit",t[17])],Qe=!0)},p(J,ge){let We={};ge[0]&64|ge[1]&64&&(We.$$scope={dirty:ge,ctx:J}),i.$set(We),(!dt||ge[0]&128)&&Me(c,J[7]),ge[0]&1&&E.value!==J[0].title&&xe(E,J[0].title),J[8]?Te&&(Te.d(1),Te=null):Te?Te.p(J,ge):(Te=el(J),Te.c(),Te.m(p,T)),J[9].theme&&J[9].allowGH?Y?Y.p(J,ge):(Y=tl(J),Y.c(),Y.m(C,null)):Y&&(Y.d(1),Y=null),(!dt||ge[0]&32&&ue!==(ue=J[5]||""))&&(W.value=ue)},i(J){dt||(z(i.$$.fragment,J),dt=!0)},o(J){V(i.$$.fragment,J),dt=!1},d(J){J&&F(e),se(i),t[18](null),Te&&Te.d(),t[22](null),Y&&Y.d(),t[23](null),Qe=!1,ae(Be)}}}function qa(t){let e,n,o={title:"Edit "+(t[8]?"folder":"bookmark"),$$slots:{default:[ja]},$$scope:{ctx:t}};return e=new on({props:o}),t[25](e),{c(){ce(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,i){let l={};i[0]&256&&(l.title="Edit "+(r[8]?"folder":"bookmark")),i[0]&1021|i[1]&64&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){n||(z(e.$$.fragment,r),n=!0)},o(r){V(e.$$.fragment,r),n=!1},d(r){t[25](null),se(e,r)}}}function Ha(t,e,n){let o,r,i,l;ee(t,qt,Y=>n(27,r=Y)),ee(t,nn,Y=>n(28,i=Y)),ee(t,te,Y=>n(9,l=Y));let a,c={},f,p,m,y,E,x="",T="";Pe(()=>{G.on(G.bookmark.edit,ue),G.on(G.bookmark.delete,I),G.on(G.bookmark.thumbDropped,K),G.on(G.iconPicker.picked,U)});function C(Y){G.fire(G.iconPicker.open,Y.target)}function k(Y){Y.target.value?g(Y.target.value):B(c,p)}function I(Y,J){H(),J=J||y,Ui(J,{transform:"scale(1)",opacity:1},{transform:"scale(0)",opacity:0}).then(()=>{let ge=R(Y,r[Y.id]);return Tn("Bookmark has been removed.","info",1e4,"Undo",(We,Le)=>{We.target.closest("button")&&(gn(Le),ge())}),S(Y.id),es(Y.id)}).then(()=>G.fire(G.bookmark.removed,Y))}function R(Y,J){return()=>{delete Y.id,delete Y.dateAdded,ts(Y).then(ge=>{J&&S(ge,J),G.fire(G.bookmark.added,ge)})}}function S(Y,J=""){let ge=r,We=Y.id;J?ge[We]=J:ge[We]&&delete ge[We],qt.set(ge)}function g(Y){n(5,E=Y),n(6,x=""),n(7,T="");let J=p.querySelector(".item-thumb");J.style.backgroundColor="unset",J.style.backgroundImage=`url("${Y}")`}function M(){m.click()}function v(Y){let J=new FileReader;J.onload=ge=>g(ge.target.result),J.readAsDataURL(Y.target.files[0])}function B(Y,J){let ge="",We="",Le="",Dn=J.querySelector(".item-thumb"),Oe=J.closest("main.bookmarks")||J.closest(".modal");o||(Oe?(ge=bo(c),We=c.title,Le=_o(c.url)):ge=`background-image: url("${Qn(c.url)}")`),Dn.style=ge,n(6,x=We),n(7,T=Le),n(5,E="")}function W(){let Y="",J="",ge="";r&&r[c.id]?Y=`background-image: url("${r[c.id]}"); background-color: unset;`:c.type==="bookmark"&&c.url&&(Y=bo(c),J=c.title,ge=_o(c.url)),n(2,f.style=Y,f),n(6,x=J),n(7,T=ge)}function ue(Y,J){n(0,c=Y),y=J,n(5,E=r[c.id]||""),W(),a.open(),Wt.load()}function H(){a.close()}function le(Y){Y instanceof Event&&Y.preventDefault(),Qi(c),S(c,E),G.fire(G.bookmark.saved,c);let J=i.findIndex(ge=>ge.id===c.id);st(nn,i[J]=c,i),nn.set(i),H()}function Q(Y,J){return()=>{n(5,E=J||""),le()}}function K(Y,J){n(0,c=Y),n(5,E=J);let ge=Q(Y,r[Y.id]);Tn("Thumbnail changed.","info",1e4,"Undo",(We,Le)=>{We.target.closest("button")&&(gn(Le),ge())}),le()}function U(Y){Wt.getIcon(Y.url).then(g)}function ne(Y){be[Y?"unshift":"push"](()=>{f=Y,n(2,f)})}function Ae(){c.title=this.value,n(0,c)}function lt(){c.url=this.value,n(0,c)}let it=()=>B(c,p);function dt(Y){be[Y?"unshift":"push"](()=>{m=Y,n(4,m)})}function Qe(Y){be[Y?"unshift":"push"](()=>{p=Y,n(3,p)})}let Be=()=>I(c);function Te(Y){be[Y?"unshift":"push"](()=>{a=Y,n(1,a)})}return t.$$.update=()=>{t.$$.dirty[0]&1&&n(8,o=c.type==="folder")},[c,a,f,p,m,E,x,T,o,l,C,k,I,M,v,B,H,le,ne,Ae,lt,it,dt,Qe,Be,Te]}var fi=class extends fe{constructor(e){super(),pe(this,e,Ha,qa,de,{},null,[-1,-1])}},di=fi;function nl(t,e,n){let o=t.slice();return o[11]=e[n],o}function Wa(t){let e;return{c(){e=A("div"),e.textContent="There are no icons in this theme.",h(e,"class","icon-picker-empty")},m(n,o){D(n,e,o)},p:me,d(n){n&&F(e)}}}function Ga(t){let e,n=$e(t[2]),o=[];for(let r=0;r<n.length;r+=1)o[r]=ol(nl(t,n,r));return{c(){e=A("div");for(let r=0;r<o.length;r+=1)o[r].c();h(e,"class","icon-picker-content-inner")},m(r,i){D(r,e,i);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(e,null)},p(r,i){if(i&20){n=$e(r[2]);let l;for(l=0;l<n.length;l+=1){let a=nl(r,n,l);o[l]?o[l].p(a,i):(o[l]=ol(a),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(r){r&&F(e),Mt(o,r)}}}function ol(t){let e,n=t[11].name+"",o,r,i,l;function a(){return t[8](t[11])}return{c(){e=A("a"),o=ye(n),h(e,"class","icon-picker-icon"),h(e,"href",r=t[11].imgUrl),Cn(e,"background-image","url('"+t[11].imgUrl+"')")},m(c,f){D(c,e,f),w(e,o),i||(l=q(e,"click",nt(a)),i=!0)},p(c,f){t=c,f&4&&n!==(n=t[11].name+"")&&Me(o,n),f&4&&r!==(r=t[11].imgUrl)&&h(e,"href",r),f&4&&Cn(e,"background-image","url('"+t[11].imgUrl+"')")},d(c){c&&F(e),i=!1,l()}}}function Ua(t){let e,n,o,r,i,l,a,c,f,p,m,y,E,x;function T(I,R){return I[2].length?Ga:Wa}let C=T(t,-1),k=C(t);return{c(){e=A("div"),n=Po("svg"),o=Po("path"),r=L(),i=A("input"),l=L(),a=A("div"),k.c(),c=L(),f=A("div"),p=A("button"),p.textContent="Close",m=L(),y=A("div"),h(o,"d","M 21 3 C 11.601563 3 4 10.601563 4 20 C 4 29.398438 11.601563 37 21 37 C 24.355469 37 27.460938 36.015625 30.09375 34.34375 L 42.375 46.625 L 46.625 42.375 L 34.5 30.28125 C 36.679688 27.421875 38 23.878906 38 20 C 38 10.601563 30.398438 3 21 3 Z M 21 7 C 28.199219 7 34 12.800781 34 20 C 34 27.199219 28.199219 33 21 33 C 13.800781 33 8 27.199219 8 20 C 8 12.800781 13.800781 7 21 7 Z"),Cn(n,"fill","currentColor"),h(n,"xmlns","http://www.w3.org/2000/svg"),h(n,"viewBox","0 0 50 50"),h(n,"width","50px"),h(n,"height","50px"),h(i,"type","search"),h(i,"placeholder","Filter"),h(e,"class","icon-picker-filter"),h(a,"class","icon-picker-content"),h(p,"type","button"),h(p,"class","btn"),h(y,"class","flex-spacer"),h(f,"class","buttons")},m(I,R){D(I,e,R),w(e,n),w(n,o),w(e,r),w(e,i),xe(i,t[0]),D(I,l,R),D(I,a,R),k.m(a,null),D(I,c,R),D(I,f,R),w(f,p),w(f,m),w(f,y),E||(x=[q(i,"input",t[7]),q(p,"click",t[5])],E=!0)},p(I,R){R&1&&i.value!==I[0]&&xe(i,I[0]),C===(C=T(I,R))&&k?k.p(I,R):(k.d(1),k=C(I),k&&(k.c(),k.m(a,null)))},d(I){I&&(F(e),F(l),F(a),F(c),F(f)),k.d(),E=!1,ae(x)}}}function za(t){let e,n,o={title:"Icon Picker ("+t[3].theme+")",cssClass:"icon-picker",$$slots:{default:[Ua]},$$scope:{ctx:t}};return e=new on({props:o}),t[9](e),{c(){ce(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,[i]){let l={};i&8&&(l.title="Icon Picker ("+r[3].theme+")"),i&16389&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){n||(z(e.$$.fragment,r),n=!0)},o(r){V(e.$$.fragment,r),n=!1},d(r){t[9](null),se(e,r)}}}function Xa(t,e,n){let o,r,i;ee(t,Vo,x=>n(6,r=x)),ee(t,te,x=>n(3,i=x));let l,a="";Pe(()=>{G.on(G.iconPicker.open,f)});function c(x){G.fire(G.iconPicker.picked,x),l.close()}function f(x){Wt.load(),l.open(x)}function p(){l.close()}function m(){a=this.value,n(0,a)}let y=x=>c(x);function E(x){be[x?"unshift":"push"](()=>{l=x,n(1,l)})}return t.$$.update=()=>{t.$$.dirty&65&&n(2,o=a?r.filter(x=>x.name.includes(a)):r)},[a,l,o,i,c,p,r,m,y,E]}var pi=class extends fe{constructor(e){super(),pe(this,e,Xa,za,de,{})}},mi=pi;var Ya=1e4;function Va(t){Pe(()=>{setTimeout(e,Ya)});async function e(){let n=await zo(),r=(await Vn()).map(l=>l.id),i=0;for(let l in n)r.includes(l)||(delete n[l],i+=1);i&&(await Xo(n),console.log(`Purged ${i} unused thumbnail${i>1?"s":""}.`))}return[]}var hi=class extends fe{constructor(e){super(),pe(this,e,Va,null,de,{})}},gi=hi;function Ka(t){let e,n,o,r,i,l,a,c,f,p,m,y,E,x,T,C,k,I,R,S,g,M,v,B;return{c(){e=A("p"),n=ye("Unfortunately, due to Firefox security restrictions,"),o=A("br"),r=ye(`
		Perfect Home is unable to open links to local files.`),i=A("br"),l=A("br"),a=ye(`
		You can change that yourself in your browser settings.`),c=A("br"),f=ye(`
		See `),p=A("a"),p.textContent="FAQ",m=ye(" on how to do that."),y=A("br"),E=ye(`
		Your extension URL is:`),x=A("br"),T=L(),C=A("input"),I=L(),R=A("div"),S=A("button"),S.textContent="Close",g=L(),M=A("div"),h(p,"href","https://github.com/perfect-things/perfect-home/blob/master/FAQ.md#cant-open-a-bookmark-to-a-local-file-starting-with-file"),h(p,"target","_blank"),h(C,"class","ext-url"),h(C,"type","text"),C.readOnly=!0,C.value=k=location.href,h(S,"type","button"),h(S,"class","btn"),h(M,"class","flex-spacer"),h(R,"class","buttons")},m(W,ue){D(W,e,ue),w(e,n),w(e,o),w(e,r),w(e,i),w(e,l),w(e,a),w(e,c),w(e,f),w(e,p),w(e,m),w(e,y),w(e,E),w(e,x),w(e,T),w(e,C),D(W,I,ue),D(W,R,ue),w(R,S),w(R,g),w(R,M),v||(B=[q(C,"focus",Ja),q(S,"click",function(){St(t[0].close())&&t[0].close().apply(this,arguments)})],v=!0)},p(W,ue){t=W},d(W){W&&(F(e),F(I),F(R)),v=!1,ae(B)}}}function Za(t){let e,n,o={title:"Error",$$slots:{default:[Ka]},$$scope:{ctx:t}};return e=new on({props:o}),t[1](e),{c(){ce(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,[i]){let l={};i&5&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){n||(z(e.$$.fragment,r),n=!0)},o(r){V(e.$$.fragment,r),n=!1},d(r){t[1](null),se(e,r)}}}var Ja=t=>t.target.select();function Qa(t,e,n){let o;G.on(G.document.localLink,()=>o.open());function r(i){be[i?"unshift":"push"](()=>{o=i,n(0,o)})}return[o,r]}var _i=class extends fe{constructor(e){super(),pe(this,e,Qa,Za,de,{})}},rl=_i;function ec(t){let e,n,o,r,i,l,a,c,f,p,m,y,E,x,T,C,k,I,R,S,g,M;return e=new li({}),o=new Or({}),i=new Gr({}),a=new Xr({}),f=new Zr({}),m=new ui({}),E=new di({}),T=new mi({}),k=new Vr({}),R=new rl({}),g=new gi({}),{c(){ce(e.$$.fragment),n=L(),ce(o.$$.fragment),r=L(),ce(i.$$.fragment),l=L(),ce(a.$$.fragment),c=L(),ce(f.$$.fragment),p=L(),ce(m.$$.fragment),y=L(),ce(E.$$.fragment),x=L(),ce(T.$$.fragment),C=L(),ce(k.$$.fragment),I=L(),ce(R.$$.fragment),S=L(),ce(g.$$.fragment)},m(v,B){ie(e,v,B),D(v,n,B),ie(o,v,B),D(v,r,B),ie(i,v,B),D(v,l,B),ie(a,v,B),D(v,c,B),ie(f,v,B),D(v,p,B),ie(m,v,B),D(v,y,B),ie(E,v,B),D(v,x,B),ie(T,v,B),D(v,C,B),ie(k,v,B),D(v,I,B),ie(R,v,B),D(v,S,B),ie(g,v,B),M=!0},p:me,i(v){M||(z(e.$$.fragment,v),z(o.$$.fragment,v),z(i.$$.fragment,v),z(a.$$.fragment,v),z(f.$$.fragment,v),z(m.$$.fragment,v),z(E.$$.fragment,v),z(T.$$.fragment,v),z(k.$$.fragment,v),z(R.$$.fragment,v),z(g.$$.fragment,v),M=!0)},o(v){V(e.$$.fragment,v),V(o.$$.fragment,v),V(i.$$.fragment,v),V(a.$$.fragment,v),V(f.$$.fragment,v),V(m.$$.fragment,v),V(E.$$.fragment,v),V(T.$$.fragment,v),V(k.$$.fragment,v),V(R.$$.fragment,v),V(g.$$.fragment,v),M=!1},d(v){v&&(F(n),F(r),F(l),F(c),F(p),F(y),F(x),F(C),F(I),F(S)),se(e,v),se(o,v),se(i,v),se(a,v),se(f,v),se(m,v),se(E,v),se(T,v),se(k,v),se(R,v),se(g,v)}}}function tc(t){return document.addEventListener("click",e=>G.fire(G.document.clicked,e)),window.addEventListener("dragover",e=>e.preventDefault(),!1),window.addEventListener("drop",e=>e.preventDefault(),!0),[]}var bi=class extends fe{constructor(e){super(),pe(this,e,tc,ec,de,{})}},vi=bi;new vi({target:document.querySelector("#app")});})();
